H$.inst=function(){var a=$(".HsList,.HsForm").filter(":visible:first");return a.data("HsList")||a.data("HsForm")};H$.src=function(){return(H$.inst()._url||location.pathname).replace(/\?.*/,"").replace(/\/[^\/]+$/,"")};H$.load=function(a){var b=H$.inst();b.load(void 0,hsSerialMix(b._data,a))};H$.send=function(a,b){var c;$.hsAjax({url:hsFixUri(a),data:hsSerialArr(b),complete:function(a){c=hsResponse(a,3)},type:"post",dataType:"json",async:!1,cache:!1,global:!1});return c};
H$.search=function(a){var b=H$.src()+"/search.act";return H$.send(b,a)};H$.create=function(a){var b=H$.src()+"/create.act";return H$.send(b,a)};H$.update=function(a){var b=H$.src()+"/update.act";return H$.send(b,a)};H$["delete"]=function(a){var b=H$.src()+"/delete.act";return H$.send(b,a)};
function setFormItems(a,b){a.on("loadOver",function(c,b){c=a.find("[data-toggle=dateinput],[data-toggle=datetimepicker]");c.size()&&forDateInput();c=a.find("[data-toggle=suggest]");c.size()&&forSuggInput();c=a.find("[data-toggle=fileinput]");c.size()&&setFileInput(c);c=a.find("[data-toggle=tagsinput]");c.size()&&setTagsInput(c);c=a.find("textarea[data-type=html]");c.size()&&setEditor(c);c=a.find("textarea[data-type=code]");c.size()&&setMirror(c)});a.on("willSave",function(c,b){synEditor(a.find("textarea[data-type]"));
b&&a.find("textarea[data-type]").each(function(){b.set($(this).attr("name"),$(this).val())})});b.on("hsClose",function(b,e){desEditor(a.find("textarea[data-type]"))})}function setInfoItems(a,b){a.on("loadOver",function(b,e){b=a.find("textarea[data-type=code]");b.size()&&setMirror(b);b=a.find("pre[data-type=code]");b.size()&&setMirror(b)});b.on("hsClose",function(b,e){desEditor(a.find("textarea[data-type]"))})}
function forDateInput(a){hsRequires(["static/addons/bootstrap-datetimepicker/css/datetimepicker.min.css","static/addons/bootstrap-datetimepicker/datetimepicker.min.js"],a)}function forSuggInput(a){hsRequires(["static/addons/bootstrap-suggest/suggest.min.js"],a)}function forFileInput(a){hsRequires(["static/addons/bootstrap-fileinput/css/fileinput.min.css","static/addons/bootstrap-fileinput/fileinput.min.js"],a)}function setFileInput(a,b){forFileInput(function(){a.hsFileInput();b&&b.call(a)})}
function forTagsInput(a){hsRequires(["static/addons/bootstrap-tagsinput/css/tagsinput.min.css","static/addons/bootstrap-tagsinput/tagsinput.min.js"],a)}function setTagsInput(a,b){forTagsInput(function(){a.hsTagsInput();b&&b.call(a)})}function synEditor(a){a.each(function(){$(this).data("synchro")&&$(this).data("synchro")()})}function desEditor(a){a.each(function(){$(this).data("destroy")&&$(this).data("destroy")()})}
function forEditor(a){hsRequires(["static/addons/summernote/summernote.min.css","static/addons/summernote/summernote.min.js"],function(){var b=HsLANG.lang;(b=b&&"en_US"!=b?b.replace("_","-"):null)?hsRequires(["static/addons/summernote/lang/summernote-"+b+".js"],a):a()})}
function setEditor(a,b){forMirror(function(){forEditor(function(){a.each(function(){var a=this,b=$(this).hsData()||{},f=HsLANG.lang.replace("_","-"),h={toolbar:[["font",["color","bold","italic"]],["inst",["table","picture","link"]],["para",["style","paragraph","ul","ol"]],["misc",["clean","codeview"]]],buttons:{clean:function(){return $.summernote.ui.button({contents:'<i class="note-icon-eraser"></i>',tooltip:$.summernote.lang[f].font.clear,click:function(){$.hsMask({title:"\u5bcc\u6587\u672c\u683c\u5f0f\u5316\u5de5\u5177",
html:'<form onsubmit="return false"><div class="form-group row"><label class="col-xs-4 text-right control-label form-control-static">\u5b57\u4f53</label><div class="col-xs-6"><input class="form-control" type="text"   name="font-family" value=""  data-unit=""   list="hs-font-list"><datalist id="hs-font-list"><option value="SimSun" style="font-family: SimSun">\u5b8b\u4f53</option><option value="SimHei" style="font-family: SimHei">\u9ed1\u4f53</option><option value="KaiTi"  style="font-family: KaiTi" >\u6977\u4f53</option></datalist></div></div><div class="form-group row"><label class="col-xs-4 text-right control-label form-control-static">\u5b57\u53f7</label><div class="col-xs-4"><input class="form-control" type="number" name="font-size"   value="" data-unit="px" step="1"   min="0" max="36"></div><div class="col-xs-2 form-control-static">(px)</div></div><div class="form-group row"><label class="col-xs-4 text-right control-label form-control-static">\u884c\u9ad8</label><div class="col-xs-4"><input class="form-control" type="number" name="line-height" value="" data-unit="em" step="0.1" min="0" max="8" ></div><div class="col-xs-2 form-control-static">(em)</div></div><div class="form-group row"><label class="col-xs-4 text-right control-label form-control-static">\u7f29\u8fdb</label><div class="col-xs-4"><input class="form-control" type="number" name="text-indent" value="" data-unit="em" step="0.5" min="0" max="8" ></div><div class="col-xs-2 form-control-static">(em)</div></div><div class="form-group row"><label class="col-xs-4 text-right control-label form-control-static">\u6bb5\u5c3e\u95f4\u8ddd</label><div class="col-xs-4"><input class="form-control" type="number" name="margin-bottom" value="" data-unit="px" step="1" min="0" max="80"></div><div class="col-xs-2 form-control-static">(px)</div></div><div class="form-group row"><label class="col-xs-4 text-right control-label form-control-static">\u6587\u672c\u5bf9\u9f50</label><div class="col-xs-4"><select class="form-control" name="text-align" data-unit=""><option value=""></option><option value="center" > \u5c45\u4e2d\u5bf9\u9f50</option><option value="justify"> \u4e24\u7aef\u5bf9\u9f50</option></select></div></div><div class="form-group row"><label class="col-xs-4 text-right control-label form-control-static">\u56fe\u7247\u6837\u5f0f</label><div class="col-xs-8 radio checkbox"><label><input type="checkbox" name="pics" data-float="" data-margin="0 auto" data-display="block"> \u5c45\u4e2d</label><label><input type="checkbox" name="picw" data-width="100%"> \u5bbd 100%</label></div></div><div class="form-group row"><label class="col-xs-4 text-right control-label form-control-static">\u5e94\u7528\u8303\u56f4</label><div class="col-xs-8 radio"><label><input type="radio" name="area" value="range" checked="checked" > \u9009\u533a</label><label><input type="radio" name="area" value="whole"> \u5168\u6587</label><label><input type="radio" name="area" value="clean"> \u91cd\u7f6e</label></div></div></form>'},
{label:"\u5e94\u7528",glass:"btn-primary",click:function(){var b=$(this).closest(".modal-content").find("form"),c={width:"",margin:"",display:""},e={};switch(b.find("[name=area]:checked").val()){case "range":var d=$(a).summernote("getLastRange").nodes();break;case "whole":d=$(a).data("summernote").layoutInfo.editable;d=$(d).find("p,pre,div,ul,ol,h1,h2,h3,h4,h5,h6,table");break;case "clean":d=$(a).summernote("code"),/<\w+[^>]+>/.test(d)?(d=d.replace(/\x3c!--[\S\s]*?--\x3e/mg,""),d=d.replace(/(<font(\s[^>]*)?>|<\/font>)/mg,
""),d=d.replace(/(<span(\s[^>]*)?>|<\/span>)/mg,""),d=d.replace(/\s(style|class|align|color)="[\S\s]*?"/mg,"")):(d=d.replace(/^/g,"<p>"),d=d.replace(/$/g,"</p>")),$(a).summernote("code",d),d=$(a).data("summernote").layoutInfo.editable,d=$(d).find("p,pre,div,ul,ol,h1,h2,h3,h4,h5,h6,table")}b.find("[name^=pic]").each(function(){$(this).prop("checked")&&$.extend(c,$(this).data())});b.find("[data-unit]").each(function(){var a=$(this).val(),b=$(this).data("unit"),c=$(this).attr("name");if(""===a||"0"===
a)a=b="";e[c]=a+b});for(b=0;b<d.length;b++){var f=$(d[b]).closest("p,pre,div,ul,ol,h1,h2,h3,h4,h5,h6,table,.note-editable");f.is(".note-editable")||(f.css(e),f=f.find("img"),0!==f.size()&&f.css(c))}}},{label:"\u53d6\u6d88",glass:"btn-default"})}}).render()}},callbacks:{onImageUpload:function(b){for(var c=new FormData,e=0;e<b.length;e++)c.append("file.",b[e]);$.ajax({url:hsFixUri(ADD_IMG_HREF),data:c,type:"POST",dataType:"json",cache:!1,contentType:!1,processData:!1,success:function(b){b=hsResponse(b);
if(b.ok)for(var c=0;c<b.file.length;c++)$(a).summernote("insertImage",b.file[c])}})}},styleTags:"p h6 h5 h4 h3 h2 h1".split(" "),colorButton:{foreColor:"#FFFFFF",backColor:"#474949"},placeholder:$(this).attr("placeholder")||"",minHeight:1*$(this).height(),maxHeight:2*$(this).height(),lang:f};$(this).summernote($.extend(h,b));$(this).siblings(".note-editor").find(".note-current-color-button").attr("data-backcolor","inherit").find("i").css("background-color","inherit");$(this).data("destroy",function(){$(a).summernote("destroy")})});
b&&b.call(a)})},"xml")}function forMirror(a,b){hsRequires(["static/addons/codemirror/codemirror.min.css","static/addons/codemirror/codemirror.min.js"],function(){$.isArray(b)||(b=[b]);for(var c=[],e=0;e<b.length;e++)c.push("static/addons/codemirror/mode/"+b[e]+"/"+b[e]+".js");c.length?hsRequires(c,a):a()})}
function setMirror(a,b){var c=[];a.each(function(){var a=$(this).data("mode")||$(this).data("type");a=getModeByName(a);c.push(a[0])});forMirror(function(){a.each(function(){var a=$(this),b=$(this).prop("readonly")&&"nocursor",c=$(this).data("mode")||$(this).data("type");c=getModeByName(c);if(a.is("textarea")){var g=CodeMirror.fromTextArea(a[0],{mode:c[1],lineNumbers:!0,readOnly:b});b=$(g.getWrapperElement());b.addClass("form-control");b.height(a.height());a.addClass("invisible");a.data("CM",g);a.data("destroy",
function(){g.toTextArea()});a.data("synchro",function(){g.save()})}else g=CodeMirror(a.parent()[0],{mode:c[1],lineNumbers:!0,readOnly:"nocursor",value:a.text()}),b=$(g.getWrapperElement()),b.addClass("form-control-static"),b.height("auto"),a.data("CM",g),a.text(""),a.hide()});b&&b.call(a)},c)}function getModeByName(a){return a?(a=a.replace(/.*\./,""),EXTN_TO_MODE[a]||[a,a]):[a,a]}
var ADD_IMG_HREF=hsChkUri("centra")?"centra/data/upload/image/create.act":"centre/data/upload/image/create.act",EXTN_TO_MODE={h:["clike","text/x-c"],c:["clike","text/x-c"],cpp:["clike","text/x-c++src"],cs:["clike","text/x-csharp"],mm:["clike","text/x-objectivec"],m:["clike","text/x-objectivec"],java:["clike","text/x-java"],scala:["clike","text/x-scala"],kotlin:["clike","text/x-kotlin"],groovy:["groovy","groovy"],gradle:["groovy","groovy"],json:["javascript","application/json"],js:["javascript","text/javascript"],
ts:["javascript","text/typescrpit"],coffee:["coffee","text/coffeescript"],jsx:["jsx","jsx"],vue:["vue","vue"],xml:["xml","xml"],xsd:["xml","xml"],dtd:["dtd","dtd"],html:["htmlmixed","text/html"],htm:["htmlmixed","text/html"],asp:["htmlembedded","text/aspx"],jsp:["htmlembedded","text/jsp"],go:["go","go"],sql:["sql","sql"],lua:["lua","lua"],php:["php","php"],rb:["ruby","ruby"],py:["python","python"],pl:["perl","perl"],pm:["perl","perl"],sh:["shell","shell"],bat:["shell","shell"],cmd:["shell","shell"],
ps1:["powershell","powershell"],css:["css","css"],scss:["css","text/x-scss"],less:["css","text/x-less"],sass:["sass","text/x-sass"],md:["markdown","markdown"],proto:["protobuf","protobuf"],ini:["properties","properties"],cnf:["properties","properties"],conf:["properties","properties"],properties:["properties","properties"]};