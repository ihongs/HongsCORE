hsChkUri("centra")?window.HsCUID=H$("%HsCUID"):(window.HsCUID=null,H$("%HsCUID",null));$(window).on("popstate",function(a){(a=a.originalEvent)&&a.state&&a.state.crumb&&($("#main-context>.breadcrumb>.back-crumb:visible>a").click(),history.pushState({crumb:!0},null,null))});history.pushState({crumb:!0},null,null);
$(document).on("reset",".HsList .findbox",function(){var a=$(this);a.find("[data-ft=_fork]").each(function(){hsFormFillFork($(this),{})});setTimeout(function(){a.find(":submit").first().click()},500)});function S$(){var a=$(".HsList,.HsForm").filter(":visible:first");return a.data("HsList")||a.data("HsForm")}S$.src=function(){return(S$()._url||location.pathname).replace(/\?.*/,"").replace(/\/[^\/]+$/,"")};
S$.send=function(a,b){var d;$.hsAjax({url:hsFixUri(a),data:hsSerialArr(b),complete:function(a){d=hsResponse(a,3)},type:"post",dataType:"json",async:!1,cache:!1,global:!1});return d};S$.search=function(a){var b=S$.src()+"/search.act";return S$.send(b,a)};S$.create=function(a){var b=S$.src()+"/create.act";return S$.send(b,a)};S$.update=function(a){var b=S$.src()+"/update.act";return S$.send(b,a)};S$.remove=function(a){var b=S$.src()+"/delete.act";return S$.send(b,a)};
S$.browse=function(a){var b=S$();b.load(void 0,hsSerialMix(b._data,a))};function hsListFillSele(a,b,d){hsListFillFork.call(this,a,b,d);a.find("input").attr("title",this._info.name).data(this._info)}function hsListFillFilt(a,b,d){d=d.replace(/^ar\.\d\./,"");return b=this._info[d]}
function hsListDollFilt(a,b,d){d=d.replace(/^ar\.\d\./,"");b=this._enum[d];for(var c=a.attr("data-vk")||0,g=a.attr("data-tk")||1,f=!0,e=0;e<b.length;e++)if(""==hsGetValue(b[e],c)){f=!1;break}f&&(f=$.isArray(b)?[]:{},f[c]="",f[g]="",b.unshift(f));return HsForm.prototype._doll__select.call(this,a,b,d)}var hsListPrepFilt=hsListDollFilt;
function hsListFillOpen(a,b,d){if(b&&b.length){$.isArray(b)||(b=[b]);switch(d){case "email":var c="glyphicon glyphicon-envelope";break;case "image":c="glyphicon glyphicon-picture";break;case "video":c="glyphicon glyphicon-play";break;case "audio":c="glyphicon glyphicon-play";break;case "file":c="glyphicon glyphicon-file";break;default:c="glyphicon glyphicon-link"}c=$('<a><span class="'+c+'"></span></a>');for(var g=$('<a target="_blank"></a>'),f=$("<li></li>"),e=$("<ul></ul>"),h=0;h<b.length;h++){if("email"===
d){var l="mailto:"+b[h];var m=b[h]}else l=hsFixUri(b[h]),m=b[h].replace(/[?#].*/,"").replace(/.*\//,""),m=decodeURIComponent(m);e.append(f.clone().append(g.clone().attr("href",l).text(m)))}a.addClass("dont-check");a.data("node",e);1<b.length?(c.appendTo(a),c.attr("href","javascript:;"),c.click(function(){var a=$.hsMask({title:"\u70b9\u51fb\u53ef\u6253\u5f00..."});a.find(".modal-body").append(e);a.find(".modal-footer").remove()})):(c.appendTo(a),c.attr("target","_blank"),"email"===d?c.attr("href",
"mailto:"+b[0]):c.attr("href",hsFixUri(b[0])))}}function hsListWrapOpen(a){return function(b,d){hsListFillOpen(b,d,a)}}
function hsSaveListCols(a,b){var d=(a.is("table")?a:a.find("table:first")).children("thead").children().children(),c=H$("%list-cols-"+b);if(c){c=c.split(",");for(var g=0;g<c.length;g++){var f=c[g];f&&d.filter("[data-fn='"+f+"']").not(".dont-hide").addClass("hidden")}}a.on("hideCols",function(){c=[];d.filter(".hidden").not(".dont-hide").each(function(){c.push($(this).data("fn"))});(c=c.join(","))||(c=null);H$("%list-cols-"+b,c)})}
function hsHideListCols(a){var b=a.is("table")?a:a.find("table:first"),d=b.children("thead").children().children(),c=$('<form class="checkbox" onsubmit="return false"></form>'),g=$('<label><input type="checkbox" name="_list_cols" /><span style="display:inline-block"></span></label>');d.each(function(){if(!$(this).is(".dont-hide,._check,._admin")){var a=g.clone().appendTo(c);a.find("span").text($(this).text());a.find("input").val($(this).data("fn"));a.find("input").prop("checked",!$(this).is(".hidden"))}});
$.hsMask({title:"\u8bf7\u9009\u62e9\u8981\u663e\u793a\u7684\u5217"},{label:"\u786e\u5b9a",glass:"btn-primary",click:function(){var f=b.children("thead,tbody,tfoot").children();c.find("input").each(function(){var a=$(this).prop("checked"),b=$(this).val(),c=d.filter('[data-fn="'+b+'"]').index();f.each(function(){$(this).children().eq(c).toggleClass("hidden",!a)})});a.trigger("hideCols")}},{label:"\u5173\u95ed",glass:"btn-default"},{label:"\u5168\u9009",glass:"btn-link pull-left",click:function(a){c.find(":checkbox").prop("checked",
!0);a.preventDefault();return!1}},{label:"\u5168\u5426",glass:"btn-link pull-left",click:function(a){c.find(":checkbox").prop("checked",!1);a.preventDefault();return!1}}).find(".modal-body").append(c)}
function hsCopyListData(a){if(window.getSelection&&document.execCommand&&document.createRange){var b=$.hsMask({mode:"warn",glass:"alert-default",text:"\u8fd9\u5c06\u6574\u7406\u539f\u59cb\u6570\u636e, \u6e05\u7406\u8868\u683c\u4e2d\u7684\u5185\u5bb9, \u63d0\u53d6\u5b8c\u6574\u7684\u65e5\u671f/\u65f6\u95f4, \u8865\u5168\u56fe\u7247/\u94fe\u63a5\u7b49\u7f51\u5740, \u4ee5\u4fbf\u60a8\u590d\u5236\u5230 Office \u7b49\u8f6f\u4ef6\u4e2d\u67e5\u9605.",title:"\u6b63\u5728\u7ec4\u7ec7\u5217\u8868\u539f\u59cb\u6570\u636e, \u8bf7\u7a0d\u7b49..."},
{glass:"btn-primary",label:"\u590d\u5236"},{glass:"btn-default",label:"\u53d6\u6d88"});b.find(".alert-footer button").prop("disabled",!0);b.find(".alert-footer button").eq(0).click(function(){b.prev().show().children().hsCopy();$.hsNote("\u590d\u5236\u6210\u529f, \u53bb\u7c98\u8d34\u5427!","success")});var d=$("<div></div>").insertBefore(b),c=$("<table></table>").appendTo(d),g=$("<thead></thead>").appendTo(c),f=$("<tbody></tbody>").appendTo(c),e=$("<tr></tr>"),h=$("<th></th>"),l=$("<td></td>");h.attr("style",
'white-space: pre-line; mso-number-format: "\\@";');l.attr("style",'white-space: pre-line; mso-number-format: "\\@";');d.attr("style","height: 1px; display: none; overflow: auto;");c.attr("style","margin: 1px;");c.attr("class","table table-bordered table-copylist");a.find("thead:first tr").each(function(){var a=e.clone().appendTo(g);$(this).find("th").each(function(){var b=$(this);b.is(".dont-copy,._check,._admin,:hidden")||h.clone().appendTo(a).text(b.text())})});a.find("tbody:first tr").each(function(){if($(this).is(".active")){var a=
e.clone().appendTo(f);$(this).find("td").each(function(){var b=$(this);if(!b.is(".dont-copy,._check,._admin,:hidden")){var c=l.clone().appendTo(a);b.data("node")?c.html(hsTidyHtmlTags(b.data("node"))):b.data("html")?c.html(hsTidyHtmlTags(b.data("html"))):b.data("text")?c.text(b.data("text")):b.attr("title")?c.text(b.attr("title")):c.html(hsTidyHtmlTags(b.html()))}})}});b.removeClass("alert-info").addClass("alert-success");b.find(".alert-footer .btn").prop("disabled",!1);b.find(".alert-title").text("\u5df2\u7ecf\u5907\u597d\u5217\u8868\u539f\u59cb\u6570\u636e, \u8bf7\u590d\u5236\u5427!")}else $.hsWarn("\u6d4f\u89c8\u5668\u65e0\u6cd5\u590d\u5236\r\n\u8bf7\u4f7f\u7528\u8f83\u65b0\u7248\u7684 Chrome/Safari/Firefox, \u6216\u67d0\u4e9b\u53cc\u6838/\u591a\u6838\u6d4f\u89c8\u5668\u7684\u6781\u901f\u6a21\u5f0f.",
"warning")}function hsTidyHtmlTags(a){if(!a)return"";if("number"===typeof a)return a+"";"object"===typeof a&&(a=$(a).html());a=a.replace(/\s+/gm," ");a=a.replace(/<\/?(p|br|hr|ul|ol|li|div|pre)(\/|\s.*?)?>/igm,"\r\n");return $.trim(a)}
function hsSaveWithMemo(a){return function(){var b=arguments,d=b[1],c=this,g=jQuery('<input type="text" name="memo" class="form-control" placeholder="\u9009\u586b, \u8bf7\u8f93\u5165\u64cd\u4f5c\u5907\u6ce8, \u5982: \u8865\u5145\u7b80\u4ecb\u4fe1\u606f"/>'),f=function(){d.append("memo",g.val());HsForm.prototype.save.apply(c,b)};a?this.warn(a,"warning",f,function(){delete c._waiting}).find(".alert-body").append(g).trigger("shown.bs.modal"):f()}}
function hsSendWithMemo(a,b,d,c){var g=this,f=jQuery('<input type="text" name="memo" class="form-control" placeholder="\u9009\u586b, \u8bf7\u8f93\u5165\u64cd\u4f5c\u5907\u6ce8, \u5982: \u6e05\u7406\u91cd\u590d\u6570\u636e"/>'),e=function(){var b=jQuery.extend({},hsSerialDat(c),{memo:f.val()}),e=jQuery.extend({},hsSerialDat(d),hsSerialDat(c));g.ajax({url:d,data:b,type:"POST",dataType:"json",funcName:"send",cache:!1,context:g,trigger:a,success:function(b){this.sendBack(a,b,e)}})};b?this.warn(b,"warning",
e,null).find(".alert-body").append(f).trigger("shown.bs.modal"):e()}function hsFindWithWord(a,b){var d=this.context.find(".findbox [name=wd]").val();b&&d&&/^\?.+=/.test(d)&&(d=hsSerialDic(d),b=hsSerialDic(b),delete b.wd,b=hsSerialMix(b,d));HsList.prototype.load.call(this,a,b)}
function HsStat(a,b){a=$(a);var d=a.find(".statbox"),c=a.find(".findbox"),g=a.find(".toolbox");this.context=a;this.statBox=d;this.findBox=c;this.murl=b.murl;this.curl=b.curl;this.eurl=b.eurl;var f=this;d.data("changed",d.is(".invisible"));g.on("saveBack",function(){d.is(".invisible")?d.data("changed",!0):(d.data("changed",!1),setTimeout(function(){f.load()},1E3))});c.on("submit",function(){d.is(".invisible")?d.data("changed",!0):(d.data("changed",!1),setTimeout(function(){f.load()},1E3))});d.on("change",
"input,select",function(){$(this).is(".checkall2")?$(this).closest(".checkbox").find(".checkone2").prop("checked",!1):$(this).is(".checkone2")&&$(this).closest(".checkbox").find(".checkall2").prop("checked",!1);c.find(":submit").first().click()})}
HsStat.prototype={load:function(){var a=this,b=this.statBox;hsRequires("static/addons/echarts/echarts.min.js",function(){b.find(".stat-group").each(function(){var a=$(this);if(!a.data("echart")){var b=a.find(".chartbox");b=echarts.init(b[0]);a.data("echart",b)}});a.fill(b.find("[data-type=ecount]"));a.fill(b.find("[data-type=acount]"));a.fill(b.find("[data-type=amount]"))})},fill:function(a){if(0!==a.size()){var b=this,d=this.context,c=this.statBox,g=this.findBox,f=[],e=[],h=a.attr("data-type"),l=
"amount"===h?this.murl:"acount"===h?this.curl:this.eurl;a.each(function(){$(this).data("name")&&f.push($(this).data("name"));$(this).data("extr")&&e.push($(this).data("extr"));$(this).find(".checkbox").hide();$(this).find(".chartbox").hide();$(this).find(".alertbox").show().children().text($(this).data("text")+" \u7edf\u8ba1\u4e2d...")});l=hsSetParam(l,"rb.",f)+e.join("&");var m;var k=(m=d.data("HsList"))?m._data:(m=d.data("HsTree"))?m._data:hsSerialDic(g);$.hsAjax({url:l,data:k,dataType:"json",cache:!0,
success:function(d){d=d.info||{};for(var e in d){var f=d[e],g=c.find("[data-name='"+e+"']");0!==g.size()&&0!==f.length&&(g.find(".alertbox").hide(),g.find(".checkbox").show(),g.find(".chartbox").show(),"amount"===h?(b.setAmountCheck(g,f),b.setAmountChart(g,f)):(b.setAcountCheck(g,f),b.setAcountChart(g,f)),e=g.find(".checkone2").attr("name"),k&&k[e]?g.find(".checkone2").val(k[e]):g.find(".checkall2").prop("checked",!0))}a.each(function(){$(this).find(".alertbox:visible").children().text($(this).data("text")+
" \u65e0\u7edf\u8ba1\u503c!")})}})}},copy:function(a){var b=a.find(".checkbox");if(window.getSelection&&document.execCommand&&document.createRange){var d=$.hsMask({mode:"warn",glass:"alert-default",text:"\u4e3a\u4e86\u964d\u4f4e\u7f51\u7edc\u5ef6\u8fdf, \u56fe\u8868\u6309\u4ece\u591a\u5230\u5c11\u6392, \u4ec5\u53d6\u524d 20 \u6761; \u800c\u6b64\u529f\u80fd\u5c06\u8c03\u53d6\u5b8c\u6574\u7edf\u8ba1\u6570\u636e, \u4ee5\u4fbf\u60a8\u590d\u5236\u5230 Office \u7b49\u8f6f\u4ef6\u4e2d\u67e5\u9605.",title:"\u6b63\u5728\u83b7\u53d6\u5b8c\u6574\u7edf\u8ba1\u6570\u636e, \u8bf7\u7a0d\u7b49..."},
{glass:"btn-primary",label:"\u590d\u5236"},{glass:"btn-default",label:"\u53d6\u6d88"}),c=function(){d.removeClass("alert-info").addClass("alert-success");d.find(".alert-footer .btn").prop("disabled",!1);d.find(".alert-title").text("\u5df2\u7ecf\u53d6\u5f97\u5b8c\u6574\u7edf\u8ba1\u6570\u636e, \u8bf7\u590d\u5236\u5427!")};d.find(".alert-footer button").prop("disabled",!0);d.find(".alert-footer button").eq(0).click(function(){var a=b.children("div"),c=a.children("table");a.show();c.hsCopy();a.hide();
$.hsNote("\u590d\u5236\u6210\u529f, \u53bb\u7c98\u8d34\u5427!","success")});if(b.children("div").size())c();else{var g=a.attr("data-text"),f=a.attr("data-name"),e=a.attr("data-type");a="amount"===e?this.murl:"acount"===e?this.curl:this.eurl;var h=this.findBox.serialize();a=hsSetParam(a,"rb",f);a=hsSetParam(a,"rn","0");$.hsAjax({url:a,data:h,dataType:"json",cache:!0,success:function(a){var d=$("<div></div>").appendTo(b),k=$("<table></table>").appendTo(d),h=$("<thead></thead>").appendTo(k),l=$("<tbody></tbody>").appendTo(k),
p=$("<tr></tr>"),n=$("<td></th>"),q=$("<td></td>");d.attr("style","height:1px; display:none; overflow:auto;");k.attr("style","margin:1px;").attr("class","table table-bordered");d=p.clone().appendTo(h);n.clone().appendTo(d).text(g);n.clone().appendTo(d).text("\u6570\u91cf");"amount"===e&&(n.clone().appendTo(d).text("\u6c42\u548c"),n.clone().appendTo(d).text("\u6700\u5c0f"),n.clone().appendTo(d).text("\u6700\u5927"));if(a.info&&a.info[f])for(a=a.info[f],n=0;n<a.length;n++)for(k=a[n],null===k[1]&&(k[1]=
"#"+k[0]),d=p.clone().appendTo(l),h=1;h<k.length;h++){var r=k[h];q.clone().appendTo(d).text(r)}c()}})}}else $.hsWarn("\u6d4f\u89c8\u5668\u65e0\u6cd5\u590d\u5236\r\n\u8bf7\u4f7f\u7528\u8f83\u65b0\u7248\u7684 Chrome/Safari/Firefox, \u6216\u67d0\u4e9b\u53cc\u6838/\u591a\u6838\u6d4f\u89c8\u5668\u7684\u6781\u901f\u6a21\u5f0f.","warning")},setAmountCheck:function(a,b){var d=a.data("name"),c=a.data("text");a=a.find(".checkbox").empty();var g=$("<label></label>"),f=$('<input type="checkbox" class="checkall2"/>'),
e=$("<span></span>").text("\u5168\u90e8"+c);g.append(f).append(e).appendTo(a);for(c=0;c<b.length;c++)e=b[c],""!=e[0]&&(null==e[1]&&(e[1]="#"+e[0]),g=$("<label></label>").attr("title",e[1]+" ("+e[2]+", "+e[3]+")"),f=$('<input type="checkbox" class="checkone2"/>').attr("name",d+".rg.").attr("value",e[0]),e=$("<span></span>").text(e[1]),g.append(f).append(e).appendTo(a))},setAcountCheck:function(a,b){var d=a.data("name"),c=a.data("text");a=a.find(".checkbox").empty();var g=$("<label></label>"),f=$('<input type="checkbox" class="checkall2"/>'),
e=$("<span></span>").text("\u5168\u90e8"+c);g.append(f).append(e).appendTo(a);for(c=0;c<b.length;c++)e=b[c],""!=e[0]&&(null==e[1]&&(e[1]="#"+e[0]),g=$("<label></label>").attr("title",e[1]+" ("+e[2]+")"),f=$('<input type="checkbox" class="checkone2"/>').attr("name",d+".in.").attr("value",e[0]),e=$("<span></span>").text(e[1]),g.append(f).append(e).appendTo(a))},setAcountChart:function(a,b){for(var d=this,c=a.data("echart"),g=[],f=[],e=[],h=0;h<b.length;h++){var l=b[h];""!=l[0]&&0!=l[2]&&(g.push(l[1]),
f.push(l[2]),e.push({value:l[2],name:l[1]}))}b={series:[{data:e,type:"pie"}],xAxis:[{show:!1}],yAxis:[{show:!1}]};g={series:[{data:f,type:"bar",barMaxWidth:13,itemStyle:{normal:{barBorderRadius:[4,4,0,0]}}}],xAxis:[{data:g,show:!0,type:"category"}],yAxis:[{show:!0,type:"value"}]};f={grid:{top:30,left:15,right:15,bottom:0,containLabel:!0},tooltip:{},toolbox:{show:!0,feature:{show:!0,myBar:{show:!0,icon:"M85.312 938.688H1024V1024H0V0h85.312v938.688zM256 341.312h85.312V768H256V341.312zM512 128h85.312v640H512V128z m256 213.312h85.312V768H768V341.312z",
iconStyle:{borderWidth:0,color:"#666"},title:"\u67f1\u72b6\u56fe",onclick:function(){a.data("plot","bar");c.setOption(c._barOpts)}},myPie:{show:!0,icon:"M85.312 512a426.688 426.688 0 0 0 844.8 85.312H426.688V93.888A426.816 426.816 0 0 0 85.312 512zM512 0v512h512a512 512 0 1 1-512-512z m506.816 438.848H585.152V5.184a512.32 512.32 0 0 1 433.664 433.664z",iconStyle:{borderWidth:0,color:"#666"},title:"\u997c\u89c6\u56fe",onclick:function(){a.data("plot","pie");c.setOption(c._pieOpts)}},myTab:{show:!0,
icon:"M512 1024A512 512 0 1 1 512 0a512 512 0 0 1 0 1024z m0-85.312A426.688 426.688 0 1 0 512 85.312a426.688 426.688 0 0 0 0 853.376zM320 576a64 64 0 1 1 0-128 64 64 0 0 1 0 128z m192 0a64 64 0 1 1 0-128 64 64 0 0 1 0 128z m192 0a64 64 0 1 1 0-128 64 64 0 0 1 0 128z",iconStyle:{borderWidth:0,color:"#666"},title:"\u5bfc\u51fa",onclick:function(){d.copy(a)}}}}};c._pieOpts=b;c._barOpts=g;"pie"==a.data("plot")?$.extend(f,b):$.extend(f,g);c.resize();c.setOption(f)},setAmountChart:function(a,b){for(var d=
this,c=a.data("echart"),g=[],f=[],e=[],h=[],l=[],m=0;m<b.length;m++){var k=b[m];""!=k[0]&&0!=k[2]&&(g.push(k[1]),f.push(k[2]),e.push(k[3]),h.push({value:k[2],name:k[1]}),l.push({value:k[3],name:k[1]}))}b={series:[{radius:[0,50],data:h,type:"pie"},{radius:[60,80],data:l,type:"pie"}],xAxis:[{show:!1}],yAxis:[{show:!1},{show:!1}]};g={series:[{data:f,type:"bar",barMaxWidth:13,itemStyle:{normal:{barBorderRadius:[4,4,0,0]}}},{data:e,type:"bar",barMaxWidth:13,itemStyle:{normal:{barBorderRadius:[4,4,0,0]}}}],
xAxis:[{data:g,show:!0,type:"category"}],yAxis:[{show:!0,type:"value"},{show:!0,type:"value",position:"right"}]};f={grid:{top:30,left:15,right:15,bottom:0,containLabel:!0},tooltip:{},toolbox:{show:!0,feature:{show:!0,myBar:{show:!0,icon:"M85.312 938.688H1024V1024H0V0h85.312v938.688zM256 341.312h85.312V768H256V341.312zM512 128h85.312v640H512V128z m256 213.312h85.312V768H768V341.312z",iconStyle:{borderWidth:0,color:"#666"},title:"\u67f1\u72b6\u56fe",onclick:function(){a.data("plot","bar");c.setOption(c._barOpts)}},
myPie:{show:!0,icon:"M85.312 512a426.688 426.688 0 0 0 844.8 85.312H426.688V93.888A426.816 426.816 0 0 0 85.312 512zM512 0v512h512a512 512 0 1 1-512-512z m506.816 438.848H585.152V5.184a512.32 512.32 0 0 1 433.664 433.664z",iconStyle:{borderWidth:0,color:"#666"},title:"\u997c\u89c6\u56fe",onclick:function(){a.data("plot","pie");c.setOption(c._pieOpts)}},myTab:{show:!0,icon:"M512 1024A512 512 0 1 1 512 0a512 512 0 0 1 0 1024z m0-85.312A426.688 426.688 0 1 0 512 85.312a426.688 426.688 0 0 0 0 853.376zM320 576a64 64 0 1 1 0-128 64 64 0 0 1 0 128z m192 0a64 64 0 1 1 0-128 64 64 0 0 1 0 128z m192 0a64 64 0 1 1 0-128 64 64 0 0 1 0 128z",
iconStyle:{borderWidth:0,color:"#666"},title:"\u5bfc\u51fa",onclick:function(){d.copy(a)}}}}};c._pieOpts=b;c._barOpts=g;"pie"==a.data("plot")?$.extend(f,b):$.extend(f,g);c.resize();c.setOption(f)}};jQuery.fn.hsStat=function(a){return this._hsModule(HsStat,a)};
jQuery.fn.hsCopy=function(){if(!window.getSelection||!document.execCommand||!document.createRange)throw Error("hsCopy: Copy is not supported");var a=document.createRange(),b=window.getSelection();b.removeAllRanges();for(var d=0;d<this.length;d++)try{a.selectNodeContents(this[d]),b.addRange(a)}catch(c){a.selectNode(this[d]),b.addRange(a)}document.execCommand("Copy")};