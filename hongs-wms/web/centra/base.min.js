hsChkUri("centra")?window.HsCUID=H$("%HsCUID"):(window.HsCUID=null,H$("%HsCUID",null));$(window).on("popstate",function(a){(a=a.originalEvent)&&a.state&&a.state.crumb&&($("#main-context>.breadcrumb>.back-crumb:visible>a").click(),history.pushState({crumb:!0},null,null))});history.pushState({crumb:!0},null,null);
$(document).on("reset",".HsList .findbox",function(){var a=$(this);a.find("[data-ft=_fork]").each(function(){hsFormFillFork($(this),{})});setTimeout(function(){a.find(":submit").first().click()},500)});function S$(){var a=$(".HsList,.HsForm").filter(":visible:first");return a.data("HsList")||a.data("HsForm")}S$.src=function(){return(S$()._url||location.pathname).replace(/\?.*/,"").replace(/\/[^\/]+$/,"")};
S$.send=function(a,b){var c;$.hsAjax({url:hsFixUri(a),data:hsSerialArr(b),complete:function(a){c=hsResponse(a,3)},type:"post",dataType:"json",async:!1,cache:!1,global:!1});return c};S$.search=function(a){var b=S$.src()+"/search.act";return S$.send(b,a)};S$.create=function(a){var b=S$.src()+"/create.act";return S$.send(b,a)};S$.update=function(a){var b=S$.src()+"/update.act";return S$.send(b,a)};S$.remove=function(a){var b=S$.src()+"/delete.act";return S$.send(b,a)};
S$.browse=function(a){var b=S$();b.load(void 0,hsSerialMix(b._data,a))};function hsListFillSele(a,b,c){hsListFillFork.call(this,a,b,c);a.find("input").attr("title",this._info.name).data(this._info)}function hsListFillFilt(a,b,c){c=c.replace(/^ar\.\d\./,"");return b=this._info[c]}
function hsListDollFilt(a,b,c){c=c.replace(/^ar\.\d\./,"");b=this._enum[c];for(var d=a.attr("data-vk")||0,g=a.attr("data-tk")||1,f=!0,e=0;e<b.length;e++)if(""==hsGetValue(b[e],d)){f=!1;break}f&&(f=$.isArray(b)?[]:{},f[d]="",f[g]="",b.unshift(f));return HsForm.prototype._doll__select.call(this,a,b,c)}var hsListPrepFilt=hsListDollFilt;
function hsListFillOpen(a,b,c){if(b&&b.length){$.isArray(b)||(b=[b]);switch(c){case "email":var d="glyphicon glyphicon-envelope";break;case "image":d="glyphicon glyphicon-picture";break;case "video":d="glyphicon glyphicon-play";break;case "audio":d="glyphicon glyphicon-play";break;case "file":d="glyphicon glyphicon-file";break;default:d="glyphicon glyphicon-link"}d=$('<a><span class="'+d+'"></span></a>');for(var g=$('<a target="_blank"></a>'),f=$("<li></li>"),e=$("<ul></ul>"),h=0;h<b.length;h++){if("email"===
c){var l="mailto:"+b[h];var m=b[h]}else l=hsFixUri(b[h]),m=b[h].replace(/[?#].*/,"").replace(/.*\//,""),m=decodeURIComponent(m);e.append(f.clone().append(g.clone().attr("href",l).text(m)))}a.addClass("dont-check");a.data("node",e);1<b.length?(d.appendTo(a),d.attr("href","javascript:;"),d.click(function(){var a=$.hsMask({title:"\u70b9\u51fb\u53ef\u6253\u5f00..."});a.find(".modal-body").append(e);a.find(".modal-footer").remove()})):(d.appendTo(a),d.attr("target","_blank"),"email"===c?d.attr("href",
"mailto:"+b[0]):d.attr("href",hsFixUri(b[0])))}}function hsListWrapOpen(a){return function(b,c){hsListFillOpen(b,c,a)}}
function hsSaveListCols(a,b){var c=(a.is("table")?a:a.find("table:first")).children("thead").children().children(),d=H$("%list-cols-"+b);if(d){d=d.split(",");for(var g=0;g<d.length;g++){var f=d[g];f&&c.filter('[data-fn="'+f+'"]').not(".showed").addClass("hidden")}}a.on("hideCols",function(){d=[];c.filter(".hidden").not(".showed").each(function(){d.push($(this).data("fn"))});(d=d.join(","))||(d=null);H$("%list-cols-"+b,d)})}
function hsHideListCols(a){var b=a.is("table")?a:a.find("table:first"),c=b.children("thead").children().children(),d=$('<form class="checkbox" onsubmit="return false"></form>'),g=$('<label><input type="checkbox" name="_list_cols" /><span style="display:inline-block"></span></label>');c.each(function(){if(!$(this).is(".showed,._admin,._check,._fork")){var a=g.clone().appendTo(d);a.find("span").text($(this).text());a.find("input").val($(this).data("fn"));a.find("input").prop("checked",!$(this).is(".hidden"))}});
$.hsMask({title:"\u8bf7\u9009\u62e9\u8981\u663e\u793a\u7684\u5217"},{label:"\u786e\u5b9a",glass:"btn-primary",click:function(){var f=b.children("thead,tbody,tfoot").children();d.find("input").each(function(){var a=$(this).prop("checked"),b=$(this).val(),d=c.filter('[data-fn="'+b+'"]').index();f.each(function(){$(this).children().eq(d).toggleClass("hidden",!a)})});a.trigger("hideCols")}},{label:"\u5173\u95ed",glass:"btn-default"},{label:"\u5168\u9009",glass:"btn-link pull-left",click:function(a){d.find(":checkbox").prop("checked",
!0);a.preventDefault();return!1}},{label:"\u5168\u5426",glass:"btn-link pull-left",click:function(a){d.find(":checkbox").prop("checked",!1);a.preventDefault();return!1}}).find(".modal-body").append(d)}
function hsCopyListData(a){if(window.getSelection&&document.createRange&&document.execCommand){var b=$("<div></div>").insertBefore(a),c=$("<table></table>").appendTo(b),d=$("<thead></thead>").appendTo(c),g=$("<tbody></tbody>").appendTo(c),f=$("<tr></tr>"),e=$("<td></th>"),h=$("<td></td>");b.attr("style","height:1px; overflow:auto;");c.attr("class","table table-bordered");a.find("thead:first tr").each(function(){var a=f.clone().appendTo(d);$(this).find("th").each(function(){var b=$(this);b.is(".dont-copy,._check,._amenu")||
e.clone().appendTo(a).text(b.text())})});a.find("tbody:first tr.active").each(function(){var a=f.clone().appendTo(g);$(this).find("td").each(function(){var b=$(this);if(!b.is(".dont-copy,._check,._amenu")){var d=h.clone().appendTo(a);d.attr("style","white-space: pre-line;");b.data("node")?d.html(hsTidyHtmlTags(b.data("node"))):b.data("html")?d.html(hsTidyHtmlTags(b.data("html"))):b.data("text")?d.text(b.data("text")):b.attr("title")?d.text(b.attr("title")):d.html(hsTidyHtmlTags(b.html()))}})});a=
document.createRange();var l=window.getSelection();l.removeAllRanges();try{a.selectNodeContents(c[0]),l.addRange(a)}catch(m){a.selectNode(c[0]),l.addRange(a)}document.execCommand("Copy");b.remove();$.hsNote("\u590d\u5236\u6210\u529f, \u53bb\u7c98\u8d34\u5427!","success")}else $.hsWarn("\u6d4f\u89c8\u5668\u65e0\u6cd5\u590d\u5236\r\n\u8bf7\u4f7f\u7528\u8f83\u65b0\u7248\u7684 Chrome,Firefox \u6216\u4ee5\u5b83\u4eec\u4e3a\u6838\u5fc3\u7684\u5176\u4ed6\u6d4f\u89c8\u5668.","warning")}
function hsTidyHtmlTags(a){if(!a)return"";if("number"===typeof a)return a+"";"object"===typeof a&&(a=$(a).html());a=a.replace(/\s+/gm," ");a=a.replace(/<\/?(p|br|hr|ul|ol|li|div|pre)(\/|\s.*?)?>/igm,"\r\n");return $.trim(a)}
function hsSaveWithMemo(a){return function(){var b=arguments,c=b[1],d=this,g=jQuery('<input type="text" name="memo" class="form-control" placeholder="\u9009\u586b, \u8bf7\u8f93\u5165\u64cd\u4f5c\u5907\u6ce8, \u5982: \u8865\u5145\u7b80\u4ecb\u4fe1\u606f"/>'),f=function(){c.append("memo",g.val());HsForm.prototype.save.apply(d,b)};a?this.warn(a,"warning",f,function(){delete d._waiting}).find(".alert-body").append(g).trigger("shown.bs.modal"):f()}}
function hsSendWithMemo(a,b,c,d){var g=this,f=jQuery('<input type="text" name="memo" class="form-control" placeholder="\u9009\u586b, \u8bf7\u8f93\u5165\u64cd\u4f5c\u5907\u6ce8, \u5982: \u6e05\u7406\u91cd\u590d\u6570\u636e"/>'),e=function(){var b=jQuery.extend({},hsSerialDat(d),{memo:f.val()}),e=jQuery.extend({},hsSerialDat(c),hsSerialDat(d));g.ajax({url:c,data:b,type:"POST",dataType:"json",funcName:"send",cache:!1,context:g,trigger:a,success:function(b){this.sendBack(a,b,e)}})};b?this.warn(b,"warning",
e,null).find(".alert-body").append(f).trigger("shown.bs.modal"):e()}function hsFindWithWord(a,b){var c=this.context.find(".findbox [name=wd]").val();b&&c&&/^\?.+=/.test(c)&&(c=hsSerialDic(c),b=hsSerialDic(b),delete b.wd,b=hsSerialMix(b,c));HsList.prototype.load.call(this,a,b)}
function HsStat(a,b){a=$(a);var c=a.find(".statbox"),d=a.find(".findbox"),g=a.find(".toolbox");this.context=a;this.statBox=c;this.findBox=d;this.murl=b.murl;this.curl=b.curl;var f=this;c.data("changed",c.is(".invisible"));g.on("saveBack",function(){c.is(".invisible")?c.data("changed",!0):(c.data("changed",!1),setTimeout(function(){f.load()},1E3))});d.on("submit",function(){c.is(".invisible")?c.data("changed",!0):(c.data("changed",!1),setTimeout(function(){f.load()},1E3))});c.on("change","input,select",
function(){$(this).is(".checkall2")?$(this).closest(".checkbox").find(".checkone2").prop("checked",!1):$(this).is(".checkone2")&&$(this).closest(".checkbox").find(".checkall2").prop("checked",!1);d.find(":submit").first().click()})}
HsStat.prototype={load:function(){var a=this,b=this.statBox;hsRequires("static/addons/echarts/echarts.min.js",function(){b.find("[data-type=acount],[data-type=amount]").each(function(){var a=$(this);if(!a.data("echart")){var b=a.find(".chartbox");b=echarts.init(b[0]);a.data("echart",b)}});a.amount();a.acount()})},amount:function(a){var b=this,c=this.murl,d=this.context,g=this.statBox,f=this.findBox;a||(a=[],g.find("[data-type=amount]").each(function(){a.push($(this).attr("data-rb"))}));0!=a.length&&
$.ajax({url:c+a.join(""),data:f.serialize(),dataType:"json",cache:!0,success:function(a){a=a.info||{};for(var c in a)if("__count__"!=c){var e=g.find("[data-name='"+c+"']");if(0!=e.size()){var f=a[c];b.setAmountCheck(e,f);b.setAmountChart(e,f)}}a=d.data("HsList");a=hsSerialDic(a._data);for(c in a)g.find("[name='"+c+"']").val(a[c]);g.find(".checkbox").each(function(){0===$(this).find(":checked").size()&&$(this).find(".checkall2").prop("checked",!0)})}})},acount:function(a){var b=this,c=this.curl,d=
this.context,g=this.statBox,f=this.findBox;a||(a=[],g.find("[data-type=acount]").each(function(){a.push($(this).attr("data-rb"))}));0!=a.length&&$.ajax({url:c+a.join(""),data:f.serialize(),dataType:"json",cache:!0,success:function(a){a=a.info||{};for(var c in a)if("__count__"!=c){var e=g.find("[data-name='"+c+"']");if(0!=e.size()){var f=a[c];b.setAcountCheck(e,f);b.setAcountChart(e,f)}}a=d.data("HsList");a=hsSerialDic(a._data);for(c in a)g.find("[name='"+c+"']").val(a[c]);g.find(".checkbox").each(function(){0===
$(this).find(":checked").size()&&$(this).find(".checkall2").prop("checked",!0)})}})},export:function(a){var b=this.findBox,c=a.attr("data-rb"),d=a.attr("data-text"),g=a.attr("data-name"),f=a.attr("data-type"),e="amount"==f?this.murl:this.curl;e=hsSetParam(e,"rn","0");$.ajax({url:e+c,data:b.serialize(),dataType:"json",cache:!0,success:function(b){var c=$("<div></div>").appendTo(a),e=$("<table></table>").appendTo(c),k=$("<thead></thead>").appendTo(e),h=$("<tbody></tbody>").appendTo(e),n=$("<tr></tr>"),
p=$("<td></th>"),u=$("<td></td>");c.attr("style","height:1px; overflow:auto;");e.attr("class","table table-bordered");k=n.clone().appendTo(k);p.clone().appendTo(k).text(d);p.clone().appendTo(k).text("\u6570\u91cf");"amount"===f&&(p.clone().appendTo(k).text("\u6c42\u548c"),p.clone().appendTo(k).text("\u6700\u5c0f"),p.clone().appendTo(k).text("\u6700\u5927"));if(b.info&&b.info[g])for(b=b.info[g],p=0;p<b.length;p++){var t=b[p];k=n.clone().appendTo(h);for(var q=1;q<t.length;q++){var v=t[q];u.clone().appendTo(k).text(v)}}h=
document.createRange();n=window.getSelection();n.removeAllRanges();try{h.selectNodeContents(e[0]),n.addRange(h)}catch(w){h.selectNode(e[0]),n.addRange(h)}document.execCommand("Copy");c.remove();$.hsNote("\u590d\u5236\u6210\u529f, \u53bb\u7c98\u8d34\u5427!","success")}})},setAmountCheck:function(a,b){var c=a.data("name"),d=a.data("text");a=a.find(".checkbox").empty();var g=$("<label></label>"),f=$('<input type="checkbox" class="checkall2"/>'),e=$("<span></span>").text("\u5168\u90e8"+d);g.append(f).append(e).appendTo(a);
for(d=0;d<b.length;d++)e=b[d],""!=e[0]&&0!=e[2]&&(g=$("<label></label>").attr("title",e[1]+" ("+e[2]+", "+e[3]+")"),f=$('<input type="checkbox" class="checkone2"/>').attr("name",c+".rg.").attr("value",e[0]),e=$("<span></span>").text(e[1]),g.append(f).append(e).appendTo(a))},setAcountCheck:function(a,b){var c=a.data("name"),d=a.data("text");a=a.find(".checkbox").empty();var g=$("<label></label>"),f=$('<input type="checkbox" class="checkall2"/>'),e=$("<span></span>").text("\u5168\u90e8"+d);g.append(f).append(e).appendTo(a);
for(d=0;d<b.length;d++)e=b[d],""!=e[0]&&0!=e[2]&&(g=$("<label></label>").attr("title",e[1]+" ("+e[2]+")"),f=$('<input type="checkbox" class="checkone2"/>').attr("name",c+".in.").attr("value",e[0]),e=$("<span></span>").text(e[1]),g.append(f).append(e).appendTo(a))},setAcountChart:function(a,b){for(var c=this,d=a.data("echart"),g=[],f=[],e=[],h=0;h<b.length;h++){var l=b[h];""!=l[0]&&0!=l[2]&&(g.push(l[1]),f.push(l[2]),e.push({value:l[2],name:l[1]}))}var m={series:[{data:e,type:"pie"}],xAxis:[{show:!1}],
yAxis:[{show:!1}]},k={series:[{data:f,type:"bar",barMaxWidth:13,itemStyle:{normal:{barBorderRadius:[4,4,0,0]}}}],xAxis:[{data:g,show:!0,type:"category"}],yAxis:[{show:!0,type:"value"}]};b={grid:{top:30,left:15,right:15,bottom:0,containLabel:!0},tooltip:{},toolbox:{show:!0,feature:{show:!0,myBar:{show:!0,icon:"M85.312 938.688H1024V1024H0V0h85.312v938.688zM256 341.312h85.312V768H256V341.312zM512 128h85.312v640H512V128z m256 213.312h85.312V768H768V341.312z",title:"\u67f1\u72b6\u56fe",onclick:function(){d.setOption(k)}},
myPie:{show:!0,icon:"M85.312 512a426.688 426.688 0 0 0 844.8 85.312H426.688V93.888A426.816 426.816 0 0 0 85.312 512zM512 0v512h512a512 512 0 1 1-512-512z m506.816 438.848H585.152V5.184a512.32 512.32 0 0 1 433.664 433.664z",title:"\u997c\u89c6\u56fe",onclick:function(){d.setOption(m)}},myTab:{show:!0,icon:"M512 1024A512 512 0 1 1 512 0a512 512 0 0 1 0 1024z m0-85.312A426.688 426.688 0 1 0 512 85.312a426.688 426.688 0 0 0 0 853.376zM320 576a64 64 0 1 1 0-128 64 64 0 0 1 0 128z m192 0a64 64 0 1 1 0-128 64 64 0 0 1 0 128z m192 0a64 64 0 1 1 0-128 64 64 0 0 1 0 128z",
title:"\u5bfc\u51fa",onclick:function(){c.export(a)}}}}};"pie"==a.data("plot")?$.extend(b,m):$.extend(b,k);d.resize();d.setOption(b)},setAmountChart:function(a,b){for(var c=this,d=a.data("echart"),g=[],f=[],e=[],h=[],l=[],m=0;m<b.length;m++){var k=b[m];""!=k[0]&&0!=k[2]&&(g.push(k[1]),f.push(k[2]),e.push(k[3]),h.push({value:k[2],name:k[1]}),l.push({value:k[3],name:k[1]}))}var r={series:[{radius:[0,50],data:h,type:"pie"},{radius:[60,80],data:l,type:"pie"}],xAxis:[{show:!1}],yAxis:[{show:!1}]},n={series:[{data:f,
type:"bar",barMaxWidth:13,itemStyle:{normal:{barBorderRadius:[4,4,0,0]}}},{data:e,type:"bar",barMaxWidth:13,itemStyle:{normal:{barBorderRadius:[4,4,0,0]}}}],xAxis:[{data:g,show:!0,type:"category"}],yAxis:[{show:!0,type:"value"},{show:!0,type:"value",position:"right"}]};b={grid:{top:30,left:15,right:15,bottom:0,containLabel:!0},tooltip:{},toolbox:{show:!0,feature:{show:!0,myBar:{show:!0,icon:"M85.312 938.688H1024V1024H0V0h85.312v938.688zM256 341.312h85.312V768H256V341.312zM512 128h85.312v640H512V128z m256 213.312h85.312V768H768V341.312z",
title:"\u67f1\u72b6\u56fe",onclick:function(){d.setOption(n)}},myPie:{show:!0,icon:"M85.312 512a426.688 426.688 0 0 0 844.8 85.312H426.688V93.888A426.816 426.816 0 0 0 85.312 512zM512 0v512h512a512 512 0 1 1-512-512z m506.816 438.848H585.152V5.184a512.32 512.32 0 0 1 433.664 433.664z",title:"\u997c\u89c6\u56fe",onclick:function(){d.setOption(r)}},myTab:{show:!0,icon:"M512 1024A512 512 0 1 1 512 0a512 512 0 0 1 0 1024z m0-85.312A426.688 426.688 0 1 0 512 85.312a426.688 426.688 0 0 0 0 853.376zM320 576a64 64 0 1 1 0-128 64 64 0 0 1 0 128z m192 0a64 64 0 1 1 0-128 64 64 0 0 1 0 128z m192 0a64 64 0 1 1 0-128 64 64 0 0 1 0 128z",
title:"\u5bfc\u51fa",onclick:function(){c.export(a)}}}}};"pie"==a.data("plot")?$.extend(b,r):$.extend(b,n);d.resize();d.setOption(b)}};jQuery.fn.hsStat=function(a){return this._hsModule(HsStat,a)};