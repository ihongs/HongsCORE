if(!window.HsAUTH){window.HsAUTH={}}if(!window.HsCONF){window.HsCONF={}}if(!window.HsLANG){window.HsLANG={}}if(!window.HsREQS){window.HsREQS={}}if(!window.HsDEPS){window.HsDEPS={}}function H$(){var e=arguments[0];var d=e.charAt(0);arguments[0]=e.substring(1);switch(d){case".":return hsGetConf.apply(this,arguments);case":":return hsGetLang.apply(this,arguments);case"!":return hsChkUri.apply(this,arguments);case"/":return hsFixUri.apply(this,arguments);case"@":if(arguments.length===1){return jQuery("."+arguments[0]).data(arguments[0])}else{return jQuery(arguments[1]).closest("."+arguments[0]).data(arguments[0])}case"#":if(arguments.length===1){return jQuery("#"+arguments[0]).removeAttr("id")}else{return jQuery(arguments[1]).closest("#"+arguments[0]).removeAttr("id")}case"&":case"?":if(arguments.length===1){arguments.length=2;arguments[1]=location.href}if(typeof(arguments[1])!=="string"){if(arguments[1] instanceof jQuery||arguments[1] instanceof Element){var f=jQuery(arguments[1]).hsFind("%");arguments[1]=f.data("href")||f.data("data")?hsSerialObj(f):location.href}return hsGetSeria(arguments[1],arguments[0])}else{return hsGetParam(arguments[1],arguments[0])}case"$":case"%":var f=d==="%"?window.localStorage:window.sessionStorage;if(f===undefined){throw"H$: Does not support '"+(d==="%"?"local":"session")+"Storage'"}if(arguments.length===1){return f.getItem(arguments[0])}else{if(arguments[1]===null){f.removeItem(arguments[0])}else{f.setItem(arguments[0],arguments[1])}}return;default:throw"H$: Unrecognized identified '"+d+"'"}}function hsRequired(b,a){if(!jQuery.isArray(b)){b=[b]}var c=[b[0]];var d=b.slice(1);hsRequires(c,function(){if(d.length){hsRequired(d,a)}else{if(a){a()}}})}function hsRequires(a,g){if(!jQuery.isArray(a)){a=[a]}var e=0;var d=0;var c=a.length;var f=document.head||jQuery("head")[0]||document.documentElement;while(c>=++e){var k=a[e-1];if(HsREQS[k]){k=HsREQS[k]}var m=hsFixUri(k);if(!HsDEPS[m]){HsDEPS[m]=1}else{HsDEPS[m]+=1;if(g&&++d==c){g()}continue}if(jQuery('link[href="'+k+'"],script[src="'+k+'"],link[href="'+m+'"],script[src="'+m+'"]').size()){HsDEPS[m]+=1;if(g&&++d==c){g()}continue}var b=document.createElement(/\.css$/.test(m)?"link":"script");b.onload=b.onreadystatechange=(function(i,h){return function(){if(!i.readyState||i.readyState=="loaded"||i.readyState=="complete"){i.onload=i.onreadystatechange=null;if(g&&c==++d){g()}}}})(b,m);if(b.tagName=="SCRIPT"){b.defer=false;b.async=true;b.type="text/javascript";b.src=m}else{b.rel="stylesheet";b.type="text/css";b.href=m}f.appendChild(b)}}function hsResponse(rst,qut){if(typeof(rst.responseText)!=="undefined"){rst=rst.responseText}if(typeof(rst)==="string"){rst=jQuery.trim(rst);if(rst.charAt(0)==="{"){if(typeof(JSON)!=="undefined"){rst=JSON.parse(rst)}else{rst=eval("("+rst+")")}}else{if(rst.charAt(0)==="<"){var ern,err,msg,mat;mat=/<!--ERN:\s*(.+?)\s*-->/.exec(rst);if(mat){ern=mat[1]}mat=/<!--ERR:\s*(.+?)\s*-->/.exec(rst);if(mat){err=mat[1]}mat=/<!--MSG:\s*(.+?)\s*-->/.exec(rst);if(mat){msg=mat[1]}else{msg=rst.replace(/<iframe[\s\S]*?>[\s\S]*?<\/iframe>/gi,"").replace(/<script[\s\S]*?>[\s\S]*?<\/script>/gi,"").replace(/<style[\s\S]*?>[\s\S]*?<\/style>/gi,"").replace(/<!--[\s\S]*?-->/g,"").replace(/<[^>]*?>/g," ").replace(/&[^&;]*;/g," ").replace(/[\f\t\v]/g," ").replace(/[ ]{2,}/g," ").replace(/^\s*$/gm,"")}rst={msg:msg,err:err,ern:ern,ok:false}}else{rst={msg:rst,err:"",ern:"",ok:false}}}}if(typeof(rst)==="object"){if(rst.ok===0||rst.ok==="0"){rst.ok=false}else{if(rst.ok===1||rst.ok==="1"){rst.ok=true}else{if(typeof(rst.ok)==="undefined"){rst.ok=true}}}if(typeof(rst.ern)==="undefined"){rst.ern=""}if(typeof(rst.err)==="undefined"){rst.err=""}if(typeof(rst.msg)==="undefined"){rst.msg=""}if(!qut||!(2==(2&qut))){if(rst.ern&&/^Er[34]\d+/i.test(rst.ern)){var url;if(rst.err&&/^Goto /i.test(rst.err)){url=jQuery.trim(rst.err.substring(5))}else{url=hsGetConf(rst.ern+".redirect")}if(url!==null&&url!==undefined){if(!window.HsGone){window.HsGone=true;if(rst.msg){alert(rst.msg)}if(url&&url!="#"){location.assign(hsFixUri(url))}else{location.reload()}}throw new Error(rst.err)}}}if(!qut||!(1==(1&qut))){if(rst.ok){if(rst.msg){jQuery.hsNote(rst.msg,"success")}}else{if(rst.msg){jQuery.hsWarn(rst.msg,"warning")}else{jQuery.hsWarn(hsGetLang("error.undef"),"danger")}}}if(typeof(rst.data)!=="undefined"){jQuery.extend(rst,rst.data);delete rst.data}}return rst}function hsSerialObj(c,a){var b=jQuery.type(c);if(b=="array"||b=="object"){if(c instanceof jQuery||c instanceof Element){b="jquery"}else{if(window.FormData&&c instanceof FormData){b="fordat"}else{if(c instanceof HsSerialDic){b="serdic"}else{if(c instanceof HsSerialDat){b="serdat"}}}}}switch(b){case"undefined":case"null":case"array":case"serdic":case"serdat":return c;case"string":case"jquery":return hsSerialArr(c);case"object":case"fordat":if(a){return c}else{return hsSerialArr(c)}default:throw new Error("hsSerialObj: Unsupported type "+b)}}function hsSerialArr(h){var k=[];var f=jQuery.type(h);if(f=="array"||f=="object"){if(h instanceof jQuery||h instanceof Element){f="jquery"}else{if(window.FormData&&h instanceof FormData){f="fordat"}else{if(h instanceof HsSerialDic){f="serdic"}else{if(h instanceof HsSerialDat){f="serdat"}}}}}switch(f){case"undefined":case"null":break;case"array":k=h;break;case"object":for(var m in h){var d=h[m];k.push({name:m,value:d})}break;case"fordat":h=h.entries();while(true){var d=h.next();if(d.done){break}d=d.value;k.push({name:d[0],value:d[1]})}break;case"serdic":hsForEach(h,function(a,i){if(i.length){i=i[0];k.push({name:i,value:a})}});break;case"serdat":hsForEach(h,function(a,i){if(i.length){i=i.join(".");k.push({name:i,value:a})}});break;case"string":var g,e,m,d,j=0;g=h.split("#",2);if(g.length>1){h=g[0]}g=h.split("?",2);if(g.length>1){h=g[1]}g=h.split("&");for(;j<g.length;j++){e=g[j].split("=",2);if(e.length>1){m=decodeURIComponent(e[0]);d=decodeURIComponent(e[1]);k.push({name:m,value:d})}}break;case"jquery":h=jQuery(h);if(h.data("href")){var b=h.data("href");var n=h.data("data");var c,l,j;c=b.indexOf("?");if(c!=-1){l=hsSerialArr(b.substring(c+1));for(j=0;j<l.length;j++){k.push(l[j])}}c=b.indexOf("#");if(c!=-1){l=hsSerialArr(b.substring(c+1));for(j=0;j<l.length;j++){k.push(l[j])}}if(n){l=hsSerialArr(n);for(j=0;j<l.length;j++){k.push(l[j])}}}else{k=jQuery(h).serializeArray()}break;default:throw new Error("hsSerialArr: Unsupported type "+f)}return k}function hsSerialMix(){if(arguments.length<2){throw"hsSerialMix: No less than two arguments"}var b=hsSerialDic(arguments[0]);for(var a=1;a<arguments.length;a++){var c=hsSerialDic(arguments[a]);jQuery.extend(b,c)}return b}function hsSerialDic(d){if(d instanceof HsSerialDic){return d}var a=hsSerialArr(d);d=new HsSerialDic();for(var b=0;b<a.length;b++){var c=_hsGetDkeys(a[b].name);_hsSetPoint(d,c,a[b].value)}return d}function hsSerialDat(d){if(d instanceof HsSerialDat){return d}var a=hsSerialArr(d);d=new HsSerialDat();for(var b=0;b<a.length;b++){var c=_hsGetPkeys(a[b].name);_hsSetPoint(d,c,a[b].value)}return d}function HsSerialDic(a){if(a){jQuery.extend(this,a)}}function HsSerialDat(a){if(a){jQuery.extend(this,a)}}function hsToFormData(g){if(!g){return new FormData()}else{if(g instanceof FormData){return g}else{if(g instanceof Element){g=g.elements||[g]}else{if(g instanceof jQuery){g=g.prop("elements")||g}else{g=hsSerialArr(g)}}}}var f=new FormData();for(var d=0;d<g.length;d++){var e=g[d];if(e.disabled||!e.name){continue}if(e.type=="file"){var b=e.filez||e.files;if(b.length==0){f.append(e.name,"")}for(var c=0;c<b.length;c++){f.append(e.name,b[c])}}else{if(e.tagName=="SELECT"){var b=e.options;for(var c=0;c<b.length;c++){if(!b[c].selected){continue}f.append(e.name,b[c].value)}}else{if(e.type=="radio"||e.type=="checkbox"){if(!e.checked){continue}f.append(e.name,e.value)}else{f.append(e.name,e.value)}}}}return f}function hsAsFormData(a){a=hsSerialArr(a);if(typeof a.getAll==="function"){return a}a.append=function(b,c){a.push({name:b,value:c})};a.set=function(b,c){hsSetSeria(a,b,c)};a["delete"]=function(b){hsSetSerias(a,b,[])};a.get=function(b){return hsGetSeria(a,b)};a.getAll=function(b){return hsGetSerias(a,b)};a.has=function(b){return hsGetSerias(a,b).length>0};a.entriez=a.entries;a.entries=function(){var c,d=0,b={next:function(){if(d<a.length){c=a[d++];return{value:[c.name,c.value],done:false}}else{return{value:undefined,done:true}}}};if(window.Symbol){b[Symbol.iterator]=function(){return b}}return b};return a}function hsBeFormData(a){a=jQuery(a);a.find(".form-deposit").remove();var b=a.data("beFormData");if(b){return b}else{b={};a.data("beFormData",b)}b.append=function(c,e){var d=jQuery('<input type="hidden" class="form-deposit"/>');d.val("value",e);d.attr("name",c);a.append(d)};b["delete"]=function(c){a.find("[name='"+c+"']").remove()};b.getAll=function(d){var c=[];a.find("[name='"+d+"']").each(function(){c.push(this.value)});return c};b.get=function(c){return a.find("[name='"+c+"']").val()};b.has=function(c){return a.find("[name='"+c+"']").size()>0};b.set=function(c,d){b["delete"](c);b.append(c,d)};b.entriez=b.entries;b.entries=function(){var f=a.find("input,select,textarea");var d,e=0,c={next:function(){if(e<f.length){d=f[e++];return{value:[d.name,d.value],done:false}}else{return{value:undefined,done:true}}}};if(window.Symbol){c[Symbol.iterator]=function(){return c}}return c};return b}function hsGetSeria(a,b){if(a instanceof HsSerialDic){return _hsGetPoint(a,_hsGetDkeys(b))}if(a instanceof HsSerialDat){return _hsGetPoint(a,_hsGetPkeys(b))}if(jQuery.isPlainObject(a)){return a[b]}var d=[];for(var c=0;c<a.length;c++){if(a[c]["name"]===b){d.push(a[c]["value"])}}if(d.length===0){return undefined}if(/(\[\]|\.\.|\.$)/.test(b)){return d}return d[0]}function hsSetSeria(a,c,e){if(a instanceof HsSerialDic){_hsSetPoint(a,_hsGetDkeyz(c),e);return}if(a instanceof HsSerialDat){_hsSetPoint(a,_hsGetPkeyz(c),e);return}if(jQuery.isPlainObject(a)){a[c]=e;return}if(!jQuery.isArray(e)){e=e!==undefined&&e!==null?[e]:[]}for(var b=a.length-1;b>-1;b--){if(a[b]["name"]===c){a.splice(b,1)}}for(var d=0;d<e.length;d++){a.push({name:c,value:e[d]})}}function hsGetSerias(a,b){var c=hsGetSeria(a,b);if(c===undefined){c=[]}else{if(!jQuery.isArray(c)){c=[c]}}return c}function hsSetSerias(a,b,c){return hsSetSeria(a,b,c)}function hsGetParam(c,b){b=encodeURIComponent(b);var e=b.replace(".","\\.");var d=new RegExp("[\\?&#]"+e+"=([^&#]*)","g");var a=null;var f=[];while((a=d.exec(c))){f.push(decodeURIComponent(a[1]))}if(f.length===0){return undefined}if(/(\[\]|\.\.|\.$)/.test(b)){return f}return f[0]}function hsSetParam(b,a,f){a=encodeURIComponent(a);var e=a.replace(".","\\.");var d=new RegExp("[\\?&#]"+e+"=([^&#]*)","g");var g=/^#/.test(b)?"#":"?";b=b.replace(d,"");if(!jQuery.isArray(f)){f=f!==undefined&&f!==null?[f]:[]}for(var c=0;c<f.length;c++){b+="&"+a+"="+encodeURIComponent(f[c])}if(b.indexOf(g)===-1){b=b.replace("&",g)}return b}function hsGetParams(b,a){var c=hsGetParam(b,a);if(c===undefined){c=[]}else{if(!jQuery.isArray(c)){c=[c]}}return c}function hsSetParams(b,a,c){return hsSetParam(b,a,c)}function hsSetValue(c,b,d){if(jQuery.isArray(b)){_hsSetPoint(c,b,d)}else{if(typeof(b)==="number"){var a=[b];_hsSetPoint(c,a,d)}else{if(typeof(b)==="string"){var a=_hsGetPkeys(b);_hsSetPoint(c,a,d)}else{throw"hsSetValue: 'path' must be an array or string"}}}}function _hsSetPoint(b,a,c){if(!b){return}if(!jQuery.isPlainObject(b)){throw"_hsSetPoint: 'obj' must be an object"}if(!jQuery.isArray(a)){throw"_hsSetPoint: 'keys' must be an array"}if(!a.length){throw"_hsSetPoint: 'keys' can not be empty"}_hsSetDepth(b,a,c,0)}function _hsSetDepth(d,c,e,f){var b=c[f];if(b==null){if(d==null){d=[]}if(c.length==f+1){d.push(e)}else{d.push(_hsSetDepth(null,c,e,f+1))}return d}else{if(typeof(b)=="number"){if(d==null){d=[]}if(d.length<=b){for(var a=0;a<=b;a++){d.push(null)}}if(c.length==f+1){d[b]=e}else{d[b]=_hsSetDepth(d[b],c,e,f+1)}return d}else{if(d==null){d={}}if(c.length==f+1){d[b]=e}else{d[b]=_hsSetDepth(d[b],c,e,f+1)}return d}}}function hsGetValue(d,c,b){if(jQuery.isArray(c)){return _hsGetPoint(d,c,b)}else{if(typeof(c)==="number"){var a=[c];return _hsGetPoint(d,a,b)}else{if(typeof(c)==="string"){var a=_hsGetPkeys(c);return _hsGetPoint(d,a,b)}else{throw"hsGetValue: 'path' must be an array or string"}}}}function _hsGetPoint(c,a,b){if(!c){return b}if(!jQuery.isArray(c)&&!jQuery.isPlainObject(c)){throw"_hsGetPoint: 'obj' must be an array or object"}if(!jQuery.isArray(a)){throw"_hsGetPoint: 'keys' must be an array"}if(!a.length){throw"_hsGetPoint: 'keys' can not be empty"}return _hsGetDepth(c,a,b,0)}function _hsGetDepth(d,b,c,e){var a=b[e];if(d==null){return c}if(a==null){if(b.length==e+1){return d}else{return _hsGetDapth(d,b,c,e+1)}}else{if(typeof(a)=="number"){if(d.length<=a){return c}if(b.length==e+1){d=d[a];return d!=null?d:c}else{return _hsGetDepth(d[a],b,c,e+1)}}else{if(b.length==e+1){d=d[a];return d!=null?d:c}else{return _hsGetDepth(d[a],b,c,e+1)}}}}function _hsGetDapth(f,l,a,k){var b=[];var h=true;for(var c=k;c<l.length;c++){if(l[c]==null){h=false;break}}if(h){for(var e=0;e<f.length;e++){var d=_hsGetDepth(f[e],l,null,k);if(d!=null){b.push(d)}}}else{for(var e=0;e<f.length;e++){var g=_hsGetDepth(f[e],l,null,k);if(g!=null){b.push.apply(b,g)}}}if(!jQuery.isEmptyObject(b)){return b}else{return a}}function _hsGetPkeys(d){d=d.replace(/\]\[/g,".").replace(/\[/,".").replace(/\]/,"").split(/\./);var b,c=[];for(b=0;b<d.length;b++){var a=d[b];if(a.length==0&&b!=0){c.push(null)}else{c.push(a)}}return c}function _hsGetDkeys(a){if(/(\[\]|\.\.|\.$)/.test(a)){return[a,null]}else{return[a]}}function _hsGetPkeyz(a){a=a.replace(/(\[\]|\.)$/,"");return _hsGetPkeys(a)}function _hsGetDkeyz(a){return[a]}function hsForEach(c,b){function a(g,f,h){if(jQuery.isPlainObject(g)){for(var d in g){a(g[d],f,h.concat([d]))}}else{if(jQuery.isArray(g)){for(var e=0;e<g.length;e++){a(g[e],f,h.concat([e]))}}else{if(h.length>0){f(g,h)}}}}a(c,b,[])}function hsGetLang(c,d){if(typeof(HsLANG[c])!=="undefined"){c=HsLANG[c]}if(d instanceof Array){var b,a={};for(b in d){a[b+""]=d[b]}d=a}if(d instanceof Object){c=c.replace(/\$(\w+|\{.+?\})/gm,function(e){if(e.substring(0,2)=="${"){e=e.substring(2,e.length-1)}else{e=e.substring(1)}if(typeof(d[e])!=="undefined"){return d[e]}else{return""}})}return c}function hsGetConf(a,b){if(typeof(HsCONF[a])!=="undefined"){return HsCONF[a]}else{return b}}function hsGetAuth(a,b){if(typeof(HsAUTH[a])!=="undefined"){return HsAUTH[a]}else{return b}}function hsChkUri(a){if(!a){a=""}a=a.replace(/[?#].*/,"");return false!==hsGetAuth(a)}function hsFixUri(a){if(/^(\w+:\/\/|\/|\.\/|\.\.\/)/.test(a)){return a}var b=HsCONF.BASE_HREF;if(b===undefined){b=jQuery("base").attr("href");if(b!==undefined){b=b.replace(/\/$/,"");HsCONF.BASE_HREF=b}}return b+"/"+(a||"")}function hsSetPms(b,a){if(!b){b=""}a=hsSerialDic(a);var c=hsSerialDic(b);c=hsSerialMix(c,a);c=hsSerialArr(c);c=jQuery.param(c);b=b.replace(/[?#].*/,"");return c?b+"?"+c:b}function hsFixPms(b,a){if(!b){return""}a=hsSerialDic(a);return b.replace(/\$(\$|\w+|\{.+?\})/gm,function(d){if("$$"===d){return d}var c="";if("${"===d.substring(0,2)){d=d.substring(2,d.length-1);var e=d.indexOf("|");if(e!=-1){c=d.substring(1+e);d=d.substring(0,e)}}else{d=d.substring(1)}d=a[d];return d!==undefined&&d!==null?d:c})}function hsFormat(){if(!arguments&&!arguments.length){throw new Error("hsFormat: params required")}function c(h,f,a){var g=h.length;for(;g<f;g++){h=h+a}return h}function e(h,f,a){var g=h.length;for(;g<f;g++){h=a+h}return h}var d=0;var b=arguments;return(b[d++]+"").replace(/%%|%(\-?\+?#?0?)(\d+)?(?:\.(\d+))?([csdfiuoxX])/g,function(A,m,i,o,w){if(A==="%%"){return"%"}A=b[d++];i=i?parseInt(i):-1;o=o?parseInt(o):-1;switch(w){case"c":case"s":if(m.indexOf("-")!==-1){A=c(A,i," ")}else{A=e(A,i," ")}break;default:var h,a,v,q;switch(w){case"o":a=8;v="0";break;case"x":a=16;v="0x";break;case"X":a=16;v="0X";break;default:a=10;v="";break}h=parseFloat(A);if(o>=0){var g;g=Math.pow(a,o);h=Math.round(h*g)/g}A=h.toString(a);if(w==="X"){A=A.toUpperCase()}if(o>=1){var g,u;g=A.indexOf(".");if(g===-1){g=A.length;A=A+"."}u=m.indexOf("0")!==-1?"0":" ";for(var k=A.length-g;k<o;k++){A+=u}}if(h<0){A=A.substring(1);q="-"}else{if(m.indexOf("+")!==-1){q="+"}else{q=""}}if(m.indexOf("#")===-1){v=""}if(m.indexOf("0")!==-1){A=e(A,i-q.length-v.length,"0");A=q+v+A}else{A=q+v+A;A=e(A,i-q.length-v.length," ")}break}return A})}function hsFmtNum(r,u,h,o,y,c){if(typeof(u)==="undefined"){u=-1}if(typeof(h)==="undefined"){h=-1}if(typeof(o)==="undefined"){o=0}if(typeof(y)==="undefined"){y=","}if(typeof(c)==="undefined"){c="."}var f=parseFloat(r);if(isNaN(f)){return r}r=(Math.abs(f));f=f<0?"-":"";if(h!==-1){var e=Math.pow(10,h);r=Math.round(r*e)/e}r=r.toString();var w=r.split(".",2);if(w.length<2){if(h>0){w[1]="0"}else{w[1]="";c=""}}var g=w[0];var v=w[1];var b=g.length;for(var q=b;q<u;q++){g="0"+g}var t=v.length;for(var m=t;m<h;m++){v=v+"0"}r="";h="";if(o&&y){var l,x="";while(g!=""){l=(g.length-o);x=g.substring(l);g=g.substring(0,l);r=x+y+r}if(r){l=r.length-1;r=r.substring(0,l)}while(v!=""){l=o;x=v.substring(0,l);v=v.substring(l);h=h+y+x}if(h){l=o;h=h.substring(l)}}else{r=g;h=v}return f+r+c+h}function hsFmtDate(g,u){if(g===undefined||g===null||g===""){return""}if(typeof(g)==="number"){g=new Date(g)}else{if(typeof(g)==="string"){do{var f=Number(g);if(!isNaN(f)){g=new Date(f);break}f=Date.parse(g);if(!isNaN(f)){g=new Date(f);break}throw new Error("hsFmtDate: invalid date: "+g)}while(false)}}var r=g.getFullYear();var o=g.getMonth();var p=g.getDate();var v=g.getHours();var j=v+1;var q=v>11?v-12:v;var n=v>12?v-12:v;var e=g.getMinutes();var w=g.getSeconds();var l=g.getMilliseconds();var i=g.getDay();var t=v<12?0:1;if(q==12){q=0}if(n==0){n=12}function c(h,a){h=h?h:"";h=h.toString();var d=h.length;for(var k=d;k<a;k++){h="0"+h}return h}function b(h){var a=h.length;var d=h.substring(0,1);switch(d){case"M":if(a>=4){return hsGetLang("date.LM")[o]}if(a==3){return hsGetLang("date.SM")[o]}else{return c(o+1,a)}case"y":if(a<=2){return c(r%100,a)}else{return c(r,a)}case"d":return c(p,a);case"H":return c(v,a);case"k":return c(j,a);case"K":return c(q,a);case"h":return c(n,a);case"m":return c(e,a);case"s":return c(w,a);case"S":return c(l,a);case"a":if(a>=4){return hsGetLang("date.La")[t]}else{return hsGetLang("date.Sa")[t]}case"E":if(a>=4){return hsGetLang("date.LE")[i]}else{return hsGetLang("date.SE")[i]}case"u":return i!=0?i:7;case"U":return i;default:return h.substring(1,a-1)}}return u.replace(/M+|d+|y+|H+|k+|K+|h+|m+|s+|S+|a+|E+|u+|U+|'.*?'/g,b)}function hsPrsDate(n,r){if(!n){return new Date(1970,0,1,0,0,0,0)}if(typeof(n)==="number"){return new Date(n)}if(typeof(n)==="string"){var g=Number(n);if(!isNaN(g)){return new Date(g)}}function c(a,i){for(var d=0;d<a.length;d++){if(i==a[d]){return d}}}var j,h,u,k=0,p=0,o=0,e=0,w=0;var f=r.split(/[\WTZ]+/);var b=n.split(/[\WTZ]+/);for(var q=0;q<f.length;q++){if(b[q]==null){continue}var l=b[q];var t=f[q].length;var x=f[q].substring(0,1);switch(x){case"M":if(t>=4){h=c(hsGetLang("date.LM"),l)}else{if(t==3){h=c(hsGetLang("date.SM"),l)}else{h=parseInt(l,10)}}break;case"y":if(t<=2){j=parseInt(l,10)+2000}else{j=parseInt(l,10)}break;case"d":u=parseInt(l,10);break;case"H":case"K":k=parseInt(l,10);break;case"k":case"h":k=parseInt(l,10)-1;break;case"m":p=parseInt(l,10);break;case"s":o=parseInt(l,10);break;case"S":e=parseInt(l,10);break;case"a":if(t>=4){w=c(hsGetLang("date.La"),l)}else{w=c(hsGetLang("date.Sa"),l)}break}}if(w){k+=12}if(h){h-=1}var v;if(typeof(h)!=="undefined"&&typeof(u)!=="undefined"&&typeof(j)!=="undefined"){v=new Date();v.setFullYear(j);v.setMonth(h);v.setDate(u);v.setHours(k);v.setMinutes(p);v.setSeconds(o);v.setMilliseconds(e)}else{v=new Date(0);v.setHours(k);v.setMinutes(p);v.setSeconds(o);v.setMilliseconds(e)}return v}function hsGmtZone(c){var a,b;b=Math.abs(c);a=Math.floor(b/60);b=Math.floor(b%60);if(a<10){a="0"+a}if(b<10){b="0"+b}return"GMT"+(c>0?"-":"+")+a+":"+b}(function($){if($.jqPlainObject===undefined){$.jqPlainObject=$.isPlainObject;$.isPlainObject=function(obj){if(obj instanceof HsSerialDic||obj instanceof HsSerialDat){return true}return $.jqPlainObject(obj)}}$.hsAjax=function(url,settings){if(typeof(url)==="object"){settings=url;if(typeof(url.url)!=="undefined"){url=url.url}}url=hsFixUri(url);if(settings){if(settings.dataKind){var FormData=window.FormData||Array;switch(settings.dataKind.toLowerCase()){case"part":settings.contentType=false;settings.processData=false;settings.data=hsToFormData(settings.data);break;case"json":if($.isArray(settings.data)||$.isPlainObject(settings.data)||settings.data instanceof jQuery||settings.data instanceof Element||settings.data instanceof FormData){var hsSerialStr=JSON.stringify;settings.data=hsSerialDat(settings.data);settings.data=hsSerialStr(settings.data)}settings.contentType="application/json; charset=UTF-8";break;case"form":if($.isArray(settings.data)||$.isPlainObject(settings.data)||settings.data instanceof jQuery||settings.data instanceof Element||settings.data instanceof FormData){var hsSerialStr=jQuery.param;settings.data=hsSerialArr(settings.data);settings.data=hsSerialStr(settings.data)}settings.contentType="application/x-www-form-urlencoded; charset=UTF-8";break;default:throw new Error("hsAjax: Unrecognized dataKind "+settings.dataKind)}}else{if(settings.data&&(settings.data instanceof HsSerialDic||settings.data instanceof HsSerialDat)){settings.data=hsSerialArr(settings.data)}}}return $.ajax(url,settings)};$.hsOpen=function(url,data,complete){var div=$('<div class="modal fade in"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">&times;</button><h4  class="modal-title"  >'+hsGetLang("opening")+'</h4></div><div class="modal-body openbox"></div></div></div></div>');var box=div.find(".openbox");$(document.body).append(div);box.hsLoad(url,data,complete);div.on("hidden.bs.modal",function(){div.remove()});div.modal();return box};$.hsMask=function(opt){var mod,div,btt,btx,btn;var ini={show:true};var end=function(){};var foc=0;var dow=0;if(opt.mode){mod=$('<div class="modal fade in"><div class="alert dialog"><div class="alert-content"><div class="alert-header"><button type="button" class="close" data-dismiss="modal">&times;</button><h4  class="alert-title" ></h4></div><div class="alert-body"  ></div><div class="alert-footer"></div></div></div></div>');div=mod.find(".alert.dialog");btt=div.find(".alert-title");btx=div.find(".alert-body");btn=div.find(".alert-footer");mod.addClass("alert-modal")}else{mod=$('<div class="modal fade in"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">&times;</button><h4  class="modal-title" ></h4></div><div class="modal-body"  ></div><div class="modal-footer"></div></div></div></div>');div=mod.find(".modal-dialog");btt=div.find(".modal-title");btx=div.find(".modal-body");btn=div.find(".modal-footer")}if(opt.mode){switch(opt.mode){case"note":div.addClass("notebox");if(opt.position===undefined){opt.position="middle"}if(arguments.length<2){if(opt.backdrop===undefined){opt.backdrop="hidden"}}else{if(opt.backdrop===undefined){opt.backdrop=false}if(opt.keyboard===undefined){opt.keyboard=false}if(opt.closable===undefined){opt.closable=false}}break;case"warn":div.addClass("warnbox");if(opt.position===undefined){opt.position="middle"}if(arguments.length>1){if(opt.backdrop===undefined){opt.backdrop="static"}if(opt.keyboard===undefined){opt.keyboard=false}if(opt.closable===undefined){opt.closable=false}}break;case"wait":div.addClass("waitbox");if(opt.position===undefined){opt.position="middle"}if(opt.backdrop===undefined){opt.backdrop="static"}if(opt.keyboard===undefined){opt.keyboard=false}if(opt.closable===undefined){opt.closable=false}break;default:throw new Error("hsMask: Unsupported mode "+opt.mode)}}ini.backdrop=opt.backdrop;ini.keyboard=opt.keyboard;if(opt.count!==undefined){dow=opt.count*1000}if(opt.focus!==undefined){foc=opt.focus}if(opt.close!==undefined){end=opt.close}if(opt.title!==undefined){btt.text(opt.title)}if(opt.text!==undefined){btx.text(opt.text)}else{if(opt.html!==undefined){btx.html(opt.html)}else{if(opt.node!==undefined){btx.append(opt.node)}else{if(opt.load!==undefined){btx.hsLoad(opt.load)}}}}if(opt["class"]!==undefined){div.addClass(opt["class"])}else{if(opt.glass!==undefined){div.addClass(opt.glass)}}if(opt.space!==undefined){btx.css("white-space",opt.space)}for(var i=1;i<arguments.length;i++){var cnf=arguments[i];var btm=$('<button type="button" class="btn btn-md"></button>');btn.append(btm);if(opt.focus){foc=(i-1)}if(cnf.label){btm.text(cnf.label)}if(cnf.click){btm.click(cnf.click)}if(cnf["class"]){btm.addClass(cnf["class"])}else{if(cnf.glass){btm.addClass(cnf.glass)}else{btm.addClass("btn-default")}}}$(":focus").blur();setTimeout(function(){var fox=btn.find("button").eq(foc);if(fox.size()>0){fox[0].focus()}else{div[0].focus()}},500);if(dow!==0){setTimeout(function(){mod.modal("hide")},dow)}if(opt.closable===false){btt.siblings(".close").remove()}if(ini.backdrop==="hidden"){ini.backdrop=false;mod.on("click",function(evt){if($(this).is(evt.target)){mod.modal("hide")}})}if(opt.position==="middle"){mod.addClass("modal-middle")}else{if(opt.position==="bottom"){mod.addClass("modal-middle")}}delete ($.support.transition);btn.on("click","button",function(evt){if(evt.isPropagationStopped()||evt.isDefaultPrevented()){return}mod.modal("hide")});mod.on("hidden.bs.modal",function(evt){end.call(div,evt);mod.remove()});btx=$(document.body);btx.append(mod);mod.modal(ini);return div};$.hsNote=function(msg,typ,end,sec){if(typeof typ!=="string"){sec=end;end=typ;typ=""}var txt;var pos=msg.indexOf("\r\n");if(pos!==-1){txt=msg.substring(1+pos);msg=msg.substring(0,pos)}var opt={mode:"note",text:txt,title:msg,close:end,count:sec||2};if(typ){switch(typ){case"info":opt.glass="alert-info";break;case"danger":opt.glass="alert-danger";break;case"warning":opt.glass="alert-warning";break;case"success":opt.glass="alert-success";break;case"default":break;default:console.warn("hsNote: Wrong type "+typ)}}return $.hsMask.call(this,opt)};$.hsWarn=function(msg,typ,yes,not){if(typeof typ!=="string"){not=yes;yes=typ;typ=""}var txt;var pos=msg.indexOf("\r\n");if(pos!==-1){txt=msg.substring(1+pos);msg=msg.substring(0,pos)}var opt={mode:"warn",text:txt,title:msg};var arr=[opt];if(typ){switch(typ){case"info":opt.glass="alert-info";break;case"danger":opt.glass="alert-danger";break;case"warning":opt.glass="alert-warning";break;case"success":opt.glass="alert-success";break;case"default":break;default:console.warn("hsWarn: Wrong type "+typ)}}if(null===yes){yes=function(){}}if(typeof yes==="function"){yes={click:yes,glass:"btn-primary",label:hsGetLang("ensure")}}if(null===not){not=function(){}}if(typeof not==="function"){not={click:not,glass:"btn-default",label:hsGetLang("cancel")}}if(yes){arr.push(yes)}if(not){arr.push(not)}return $.hsMask.apply(this,arr)};$.hsWait=function(msg,xhr,xhu){var box=$.hsMask({title:msg,mode:"wait",html:'<div class="progress"><div class="progress-bar progress-bar-striped active" style="width: 100%;" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div></div>'});var mod=box.closest(".modal");var foo=box.find(".alert-footer");var bar=box.find(".progress-bar");var stt=new Date().getTime()/1000;var pct=0;var itl;function getProgtime(rtt){var ctt,snt;snt="";ctt=Math.floor(rtt/3600);if(0<ctt){rtt=rtt%3600}snt+=ctt+":";ctt=Math.floor(rtt/60);if(0<ctt){rtt=rtt%60}if(10>ctt){snt+="0"}snt+=ctt+":";if(10>rtt){snt+="0"}snt+=rtt;return snt}box.getStarting=function(){return stt};box.setStarting=function(ctt){stt=ctt};box.getProgress=function(){return pct};box.setProgress=function(snt,tal){if(itl){clearInterval(itl);itl=undefined}if(tal===undefined){tal=100;if(snt===undefined){snt=100;bar.attr("aria-valuenow",0);bar.css("width",snt+"%");itl=setInterval(function(){var ctt=new Date().getTime()/1000-stt;foo.text("+"+getProgtime(Math.ceil(ctt)))},1000);return}}var ctt,rtt;ctt=new Date().getTime()/1000-stt;pct=Math.ceil((100*snt)/(0+tal));rtt=Math.ceil((100-pct)*(ctt/pct));snt=getProgtime(rtt);bar.attr("aria-valuenow",pct);bar.css("width",pct+"%");foo.text(pct+"% -"+snt)};box.hide=function(){mod.modal("hide");if(itl){clearInterval(itl);itl=undefined}};foo.addClass("code").text("...");if(xhr){xhr.addEventListener("load",function(){box.hide()},false)}if(xhu){xhu.addEventListener("progress",function(evt){if(pct<100&&evt.lengthComputable){box.setProgress(evt.loaded,evt.total)}},false)}return box};$.hsXhup=function(msg){return function(){var xhr=$.ajaxSettings.xhr();var xhu=xhr.upload||xhr;$.hsWait(msg,xhr,xhu);return xhr}};$.hsXhrp=function(msg){return function(){var xhr=$.ajaxSettings.xhr();$.hsWait(msg,xhr,xhr);return xhr}};$.fn.hsLoad=function(url,data,complete){if($.isFunction(data)){complete=data;data=undefined}if(!$.isFunction(complete)){complete=function(){}}var dat=data?hsSerialArr(data):[];this.data("href",url).data("data",dat).addClass("loadbox").addClass("loading");var pos;pos=url.indexOf("#");if(pos!=-1){url=url.substring(0,pos)}if(/\.html$|\.html\?/.test(url)&&!hsGetParam(url,"_")&&!hsGetSeria(dat,"_")){pos=url.indexOf("?");if(pos!=-1){url=url.substring(0,pos)}dat=undefined}else{if(dat.length==0){dat=undefined}}url=hsFixUri(url);return $.fn.load.call(this,url,dat,function(){$(this).removeClass("loading").hsReady();complete.apply(this,arguments)})};$.fn.hsOpen=function(url,data,complete){var prt=$(this);var box;var tab;var bak;if(prt.is(".labs")){prt=prt.data("tabs");prt=prt.hsTadd(prt.is(".laps")?undefined:url);tab=prt[0];prt=prt[1]}else{if(prt.is(".tabs")){prt=prt.hsTadd(prt.is(".laps")?undefined:url);tab=prt[0];prt=prt[1]}else{if(prt.parent().is(".tabs")){tab=prt;prt=prt.parent().data("labs").children().eq(tab.index())}else{if(prt.parent().is(".labs")){tab=prt.parent().data("tabs").children().eq(prt.index())}}}}if(tab){bak=tab.parent().children().filter(".active");tab.show().find("a").click();tab.find("a:empty,b:empty,.title").text("...");if(prt.children().size()){prt.children().hsCloze();prt.empty()}}else{prt.trigger("hsRetir");bak=$('<div class="openbak"></div>').hide().append(prt.contents()).appendTo(prt)}box=$('<div class="openbox"></div>').appendTo(prt).data("hrev",bak);box.hsLoad(url,data,complete);return box};$.fn.hsReady=function(){var box=$(this);box.find("*").contents().filter(function(){return this.nodeType===3&&/^[ \r\n\v\t\f]+$/.test(this.nodeValue)}).remove();box.find("input").each(function(){$(this).addClass("input-"+$(this).attr("type"))});box.find("[data-topple]").each(function(){var func=$(this).attr("data-topple");if($.fn[func]){$.fn[func].call($(this))}else{if(window.console){console.warn("hsReady: Can not bind "+func)}}});box.find("[data-i18n]").each(function(){$(this).hsI18n()});$(box).hsL10n();box.trigger("hsReady");box.find("[data-eval]").each(function(){eval("(false||function(){"+$(this).attr("data-eval")+"})").call(this)});box.find("[data-load]").each(function(){$(this).hsLoad($(this).attr("data-load"),$(this).attr("data-data"))});return box};$.fn.hsClose=function(){var prt=$(this).parent();var box=$(this);var tab;if(prt.parent().is(".tabs")){tab=prt;prt=prt.parent().data("labs").children().eq(tab.index());box=prt.children(".openbox")}else{if(prt.parent().is(".labs")){tab=prt.parent().data("tabs").children().eq(prt.index())}}box.trigger("hsClose");box.hsCloze();if(tab){var idx=box.data("hrev")?box.data("hrev").index():0;var tbs=tab.parent().children();var pns=prt.parent().children();var tb2=tbs.eq(idx);var pn2=pns.eq(idx);tbs.removeClass("active");tb2.addClass("active").css("display","");pns.hide();pn2.show();if(tab.has(".close").size()){tab.remove();prt.remove()}pn2.trigger("hsRecur")}else{if(box.data("hrev")){var bak=box.data("hrev");prt.append(bak.contents());box.remove();bak.remove();prt.trigger("hsRecur")}else{if(box.closest(".modal").size()){box.closest(".modal").modal("hide")}else{if(box.closest(".alert").size()){box.closest(".alert").remove()}}}}return box};$.fn.hsCloze=function(){var box=$(this);$(document.body).find(".openbox").each(function(){if(!box.is(this)&&box.is($(this).data("rel"))){$(this).hsClose()}});return box};$.fn.hsTabs=function(tar){var box=$(this);if(!tar||!(tar instanceof jQuery)){tar=box.attr("data-target");if(tar){tar=box.hsFind(tar)}else{tar=box.next()}}box.addClass("tabs");box.data("labs",tar);tar.addClass("labs");tar.data("tabs",box);var act=box.children(".active");if(act.size()===0){act=box.children("li:first")}tar.children().hide().eq(act.index()).show();return[box,tar]};$.fn.hsTadd=function(ref){var box=$(this);var tab;var lab;if(!ref||!box.find("[data-hrel='"+ref+"']").size()){tab=$('<li><a href="javascript:;"><span class="title">...</span><span class="close">&times;</span></a></li>').appendTo(box);lab=$("<div></div>").appendTo(box.data("labs"));tab.find("a").attr("data-hrel",ref)}else{tab=box.find("[data-hrel='"+ref+"']").closest("li");lab=$(box.data("labs")).children().eq(tab.index())}return[tab,lab]};$.fn.hsTdel=function(ref){var box=$(this);var tab=box.find("[data-hrel='"+ref+"']").closest("li");var lab=$(box.data("tabs")).children().eq(tab.index());tab.children("a").hsClose();tab.remove();lab.remove();return[tab,lab]};$.fn.hsL10n=function(tit){var box=$(this);var prt=box.parent();if(!tit){var hea=box.children("[data-l10n]");if(1<=hea.size()){tit=hea.data("l10n")}else{hea=box.children("h1,h2,h3,h4");if(1<=hea.size()){tit=hea.text()}else{return}}}tit=H$("?id",box)?tit.replace("{DO}",hsGetLang("form.update")):tit.replace("{DO}",hsGetLang("form.create"));if(box.parent(".labs").size()||prt.parent(".labs").size()){var tbs=box.closest(".labs").data("tabs");var idx=box.closest(".labs>*").index();var tab=tbs.children().eq(idx);tab.find(".title,b:empty,a:empty").text(tit)}else{if(box.is(".modal-body")){box.closest(".modal").find(".modal-title:first").text(tit)}else{if(box.is(".alert-body")){box.closest(".alert").find(".alert-title:first").text(tit)}}}return box};$.fn.hsI18n=function(rep){var box=$(this);var lng;if(rep===undefined){rep=box.hsData().reps}if(box.data("l10n")){lng=box.data("l10n");lng=hsGetLang(lng,rep);box.data("l10n",lng)}else{if(box.data("i18n")){lng=box.data("i18n");lng=hsGetLang(lng,rep);box.text(lng)}else{if(box.text()){lng=box.text();lng=hsGetLang(lng,rep);box.text(lng)}}}if(box.attr("alt")){lng=box.attr("alt");lng=hsGetLang(lng,rep);box.attr("alt",lng)}if(box.attr("title")){lng=box.attr("title");lng=hsGetLang(lng,rep);box.attr("title",lng)}if(box.attr("tooltip")){lng=box.attr("tooltip");lng=hsGetLang(lng,rep);box.attr("tooltip",lng)}if(box.attr("placeholder")){lng=box.attr("placeholder");lng=hsGetLang(lng,rep);box.attr("placeholder",lng)}return box};$.fn.hsData=function(vals){if(vals){return this.data(vals)}var conf=this.data();if(conf._hs_data_===undefined){conf._hs_data_=true}else{return conf}var nreg=/^-\d+$/;var areg=/-\d+$/;var freg=/-\w/g;var that=this.get(0);var frep=function(n){return n.substring(1).toUpperCase()};var vrep=function(v){if(/^(\{.*\}|\[.*\])$/.test(v)){return eval("("+v+")")}else{if(/^(\(.*\))$/.test(v)){return eval(v)}}return v};this.each(function(){var a=this.attributes;if(!a){return}for(var i=0;i<a.length;i++){var n=a[i].name;if(n.substring(0,5)=="data-"){n=n.substring(5)}else{continue}var v=a[i].value;if(nreg.test(n)){var o=v.indexOf(":");n=v.substring(0,o);v=v.substring(1+o);n=jQuery.trim(n);v=jQuery.trim(v);v=vrep.call(that,v);hsSetValue(conf,n,v)}else{if(areg.test(n)){var o,j;o=n.lastIndexOf("-");j=n.substring(1+o);n=n.substring(0,o);j=parseInt(j);v=vrep.call(that,v);n=n.replace(freg,frep);if(conf[n]===undefined){conf[n]=[]}conf[n][j]=v}}}});return conf};$.fn._hsConfig=$.fn.hsData;$.fn.hsFind=function(selr){if(typeof selr!="string"){return $(selr)}var elem=this;selr=$.trim(selr);var flag=selr.charAt(0);var salr=selr.substring(1);salr=$.trim(salr);switch(flag){case"@":do{var x;x=elem.closest(".laps");if(x.size()){elem=x;break}x=elem.closest(".labs");if(x.size()){elem=x;break}x=elem.closest(".openbox");if(x.size()){elem=x;break}x=elem.closest(".loadbox");if(x.size()){elem=x;break}elem=$(document.body)}while(false);return salr?$(salr,elem):elem;case"%":do{var x;x=elem.closest(".loadbox");if(x.size()){elem=x;break}x=elem.closest(".openbox");if(x.size()){elem=x;break}elem=$(document.body)}while(false);return salr?$(salr,elem):elem;case"/":elem=elem.parent();var a=salr.split("/",2);if(a[0]){elem=elem.closest(a[0])}if(a[1]){elem=elem.find(a[1])}return elem;case">":return elem.children(salr);case"~":return elem.siblings(salr);case"-":return elem.prev(salr);case"+":return elem.next(salr);case"*":return elem.find(salr);case"$":return $(salr);case"#":return $(selr);default:elem=elem.find(selr);return elem.size()?elem:$(selr)}};$.fn._hsTarget=$.fn.hsFind;$.fn.hsBind=function(func,opts){var name=func.name||/^function\s+(\w+)/.exec(func.toString())[1];var inst=this.data(name);if(!inst){if(!opts){opts=this.hsData()}else{if(typeof opts==="function"){opts=opts.call(this)}}inst=new func(this,opts);this.data(name,inst);this.addClass(name)}else{if(opts){if(typeof opts==="function"){opts=opts.call(this)}if(typeof inst.reset==="function"){inst.reset(opts)}else{if(typeof inst.setup==="function"){inst.setup(opts)}}}}return inst};$.fn._hsModule=$.fn.hsBind;$.fn.hsHide=function(data){data=hsSerialArr(data);var hide=$('<input type="hidden" class="form-ignored"/>');this.empty();for(var i=0;i<data.length;i++){var item=data[i];var node=hide.clone();node.attr("name",item.name);node.attr("value",item.value);node.appendTo(this)}return this};$.fn.hsCopy=function(){if(window.clipboardData){clipboardData.setData("Text",$(this).prop("outerHTML"))}else{if(window.getSelection&&document.execCommand&&document.createRange){var rng=document.createRange();var sel=window.getSelection();sel.removeAllRanges();for(var i=0;i<this.length;i++){try{rng.selectNodeContents(this[i]);sel.addRange(rng)}catch(e){rng.selectNode(this[i]);sel.addRange(rng)}}document.execCommand("Copy")}else{throw new Error("hsCopy: Copy is not supported")}}return this};$.hsCanCopy=function(){if(window.clipboardData){return true}else{if(window.getSelection&&document.execCommand&&document.createRange){return true}else{return false}}};$.propHooks.choosed={get:function(elem){return elem.checked?true:(elem.indeterminate?null:false)},set:function(elem,stat){if(stat===null){elem.checked=false;elem.indeterminate=true}else{elem.checked=!!stat;elem.indeterminate=false}}};String.prototype.baseSize=function(){var len=0;for(var i=0;i<this.length;i++){var c=this.charCodeAt(i);if(c>128){len+=2}else{len+=1}}return len};String.prototype.byteSize=function(){var len=0;for(var i=0;i<this.length;i++){var c=this.charCodeAt(i);if(c>128){len+=3}else{len+=1}}return len};if(Object.assign===undefined){Object.assign=function(){var a=arguments[0]||{};for(var i=1;i<arguments.length;i++){var b=arguments[i];for(var k in b){a[k]=b[k]}}return a}}$(document).ajaxError(function(evt,xhr){hsResponse(xhr)});$(document).on("show.bs.modal",function(){var bod=$(document.body);if(bod.hasClass("modal-open")===false){bod.data("style",bod.attr("style")||"")}}).on("hidden.bs.modal",function(){var bod=$(document.body);if(bod.hasClass("modal-open")===false){if(bod.find(".modal:visible").size()<=0){bod.attr("style",bod.data("style"))}else{bod.addClass("modal-open")}}});$(document).on("change","select[multiple]",function(evt){if(evt.shiftKey||evt.metaKey||evt.ctrlKey||evt.altKey){return}var vals=$(this).data("vals")||[];var valz=$(this).val()||[];$.each(valz,function(x,v){var i=$.inArray(v,vals);if(i<0){vals.push(v)}else{vals.splice(i,1)}});$(this).data("vals",vals);$(this).val(vals)});$(document).on("click","[data-toggle=hsDrop]",function(evt){if($(this).siblings(".dropdown-body,.dropdown-list").size()&&!$(evt.target).is(".dropdown-deny,input")){$(this).parent().toggleClass("dropup")}}).on("click","[data-toggle=hsDisp]",function(){var btn=$(this);var tit=btn.data("title");var txt=btn.data("text");var htm=btn.data("html");$.hsMask({title:tit,text:txt,html:htm})}).on("click","[data-toggle=hsOpen]",function(){var btn=$(this);var box=btn.data("target");var url=btn.data("href");var dat=btn.data("data");var siz=btn.data("size");if(box){box=btn.hsFind(box);box.hsOpen(url,dat)}else{var b;b=$.hsOpen(url,dat);if(siz){b.closest("modal-dialog").addClass("modal-"+siz)}}}).on("cilck","[data-toggle=hsExit]",function(){var box=$(this).attr("data-target");$(this).hsFind(box||"@").hsClose()}).on("click",".close,.cancel",function(){var box;var ths=$(this);do{if(ths.is("li>.close")){return}if(ths.is("li .close")){box=ths.closest("a");break}box=ths.closest(".modal-header").next();if(box.is(".openbox")){box=box.closest(".modal");break}box=ths.closest(".openbox");if(box.is(".modal-body")){box=box.closest(".modal");break}if(box.is(".alert-body")){box=box.closest(".alert");break}if(box.size()&&box.closest(".modal,.alert").size()){break}if(ths.closest(".modal,.alert").size()){return}}while(false);if(ths.closest(".dont-close",box[0]).size()){return}box.hsClose()});$(document).on("click",".tabs > li > a",function(){var lnk=$(this);var tab=lnk.parent();var nav=tab.parent();var pns=nav.data("labs")||nav.next(".labs");var tao=nav.children(".active");var pno=pns?pns.children().eq(tao.index()):$();var pne=pns?pns.children().eq(tab.index()):$();if(tab.is(".active,.dont-close,.back-crumb")){return}if(nav.is(".tabs.laps")&&!tab.is(".hook-crumb,.hold-crumb")){tab.nextAll().find("a").each(function(){$(this).hsClose()})}if(lnk.is("[data-href]")&&!pne.children().size()){var ref=lnk.data("href");var box=$("<div></div>");pne.append(box);box.hsLoad(ref)}tao.removeClass("active");tab.addClass("active").css("display","");pno.hide().trigger("hsRetir");pne.show().trigger("hsRecur")}).on("click",".back-crumb a",function(){var nav=$(this).closest(".tabs.laps");nav.find("li:last a").hsClose();if(nav.find(".active").size()<1){nav.find("li:last a").click()}}).on("hsReady hsRecur",".labs.laps",function(){var nav=$(this).data("tabs")||$(this).siblings(".tabs.laps");nav.toggleClass("bread-home",nav.children(".home-crumb").is(".active"));nav.toggleClass("bread-hook",nav.children(".hook-crumb").is(".active"));nav.toggleClass("bread-hold",nav.children(".hold-crumb").is(".active"))});$(function(){$(document).hsReady()})})(jQuery);
function HsForm(c,a){c=jQuery(c);var r=c.closest(".loadbox");var p=c.find(".pagebox");var l=c.find("form");var h=hsGetValue(a,"loadUrl");var m=hsGetValue(a,"saveUrl");var f=hsGetValue(a,"loadData");var e=hsGetValue(a,"initData");var o=hsGetValue(a,"idKey","id");var t=hsGetValue(a,"abKey","ab");if(!l.length){l=c}this.context=c;this.loadBox=r;this.pageBox=p;this.formBox=l;this._url="";this._data=[];this._opt_group_start="#";if(a){for(var g in a){if("_"===g.substring(0,1)||this[g]!==undefined){this[g]=a[g]}else{if("@"===g.substring(0,1)){var d=g.substring(1);this.rules["[name="+d+"]"]=a[g]}else{if("$"===g.substring(0,1)){this.rules[g.substring(1)]=a[g]}else{if(":"===g.substring(0,1)){this.rmsgs[g.substring(1)]=a[g]}}}}}}var q=hsSerialArr(r);if(h){h=hsFixPms(h,q)}if(m){m=hsFixPms(m,q);this.formBox.attr("action",m)}if(!f){var b=hsGetParam(h,o);if(!b){b=hsGetSeria(q,o);f={};f[o]=b}}if(e){e=hsSerialDic(e)}else{e=hsSerialDic([]);for(var j=0;j<q.length;j++){var d=q[j];if(d.name&&(d.value||d.value===0)){var s=d.value;var g=d.name;g=_hsGetDkeys(g);_hsSetPoint(e,g,s)}}}this._init=e;this.valiInit();this.saveInit();if(h&&(hsGetParam(h,o)||hsGetParam(h,t))){this.load(h,f)}else{if(!this._url){this.loadBack({})}}}HsForm.prototype={load:function(a,b){b=hsSerialObj(b);if(a){this._url=a}if(b){this._data=b}this.ajax({url:this._url,data:this._data,type:"POST",dataType:"json",funcName:"load",cache:false,global:false,context:this,complete:this.loadBack})},loadBack:function(h){h=hsResponse(h);if(h.ok===false){return}this.formBox.trigger("loadBack",[h,this]);var c=h.page||{};var g=h.enfo||{};var e=h.info||(h.list&&h.list[0])||{};if(this._init){var f=hsSerialDic(this._init);for(var b in f){var a=f[b];b=b.replace(/(\[\]|\.)$/,"");hsSetValue(e,b,a)}}this.fillEnfo(g);this.fillInfo(e);this.fillPage(c);this.formBox.trigger("loadOver",[h,this])},fillEnfo:function(enfo){var fds,fns,fts,fls,i,n,t,v,f;fds=this.formBox.find("[data-fn],input[name],select[name],textarea[name]").not(".form-ignored");fns={};fts={};fls={};for(i=0;i<fds.length;i++){v=jQuery(fds[i]);n=v.data("fn")||v.attr("name");t=v.data("ft");f=v.data("dl");if(!n||fns[n]){continue}fns[n]=n;fts[n]=t;if(f&&typeof f!="function"){try{f=eval("(null||function(form,v,n){return "+f+";})")}catch(e){throw new Error("Parse form data-dl error: "+e)}v.data("dl",f)}if(f){fls[n]=f}}this._enfo=enfo;for(n in fns){t=fts[n];f=fls[n];v=hsGetValue(enfo,n.replace(/(\[\]|\.)$/,""));if(v===undefined){v=enfo[n]}i=this.formBox.find('[data-fn="'+n+'"]').not(".form-ignored");if(i.length===0){i=this.formBox.find('[name="'+n+'"]').not(".form-ignored")}else{if(t===undefined){t="_review"}}if(f){v=f.call(i[0],this,v,n)}if(n&&this["_doll_"+n]!==undefined){v=this["_doll_"+n].call(this,i,v,n)}else{if(t&&this["_doll_"+t]!==undefined){v=this["_doll_"+t].call(this,i,v,n)}}if(!v&&v!==0&&v!==""){continue}if(i.is("select")){this._doll__select(i,v,n)}else{this._doll__review(i,v,n)}}delete this._enfo},fillInfo:function(info){var fds,fns,fts,fls,i,n,t,v,f;fds=this.formBox.find("[data-fn],input[name],select[name],textarea[name]").not(".form-ignored");fns={};fts={};fls={};for(i=0;i<fds.length;i++){v=jQuery(fds[i]);n=v.data("fn")||v.attr("name");t=v.data("ft");f=v.data("fl");if(!n||fns[n]){continue}fns[n]=n;fts[n]=t;if(f&&typeof f!="function"){try{f=eval("(null||function(form,v,n){return "+f+";})")}catch(e){throw new Error("Parse form data-fl error: "+e)}v.data("fl",f)}if(f){fls[n]=f}}this._info=info;for(n in fns){t=fts[n];f=fls[n];v=hsGetValue(info,n.replace(/(\[\]|\.)$/,""));if(v===undefined){v=info[n]}i=this.formBox.find('[data-fn="'+n+'"]').not(".form-ignored");if(i.length===0){i=this.formBox.find('[name="'+n+'"]').not(".form-ignored")}else{if(t===undefined){t="_review"}}if(f){v=f.call(i[0],this,v,n)}if(n&&this["_fill_"+n]!==undefined){v=this["_fill_"+n].call(this,i,v,n)}else{if(t&&this["_fill_"+t]!==undefined){v=this["_fill_"+t].call(this,i,v,n)}}if(!v&&v!==0&&v!==""){continue}if(i.is(":file")){i.attr("data-value",v).change()}else{if(i.is(":checkbox,:radio")){if(!jQuery.isArray(v)){v=[v]}i.val(v).change()}else{if(i.is("input,select,textarea")){i.val(v).change()}else{i.text(v)}}}}delete this._info},fillPage:function(a){var c=this.formBox;var b=this.pageBox;if(a.state===undefined||a.state===null||a.state>0){c.show();b.hide()}else{if(b.size()){c.hide();b.show();if(a.count&&a.count>0){b.empty().append('<div class="alert alert-warning" style="width: 100%;">'+(this._above_err||hsGetLang("info.above"))+"</div>")}else{b.empty().append('<div class="alert alert-warning" style="width: 100%;">'+(this._empty_err||hsGetLang("info.empty"))+"</div>")}}else{if(a.count&&a.count>0){jQuery.hsWarn(this._above_err||hsGetLang("info.above"),"warning")}else{jQuery.hsWarn(this._empty_err||hsGetLang("info.empty"),"warning")}}}},saveInit:function(){var a=this;this.formBox.submit(function(b){if(b.isDefaultPrevented()){return}if(a._waiting){a.note(hsGetLang("form.waiting"));b.preventDefault();return}a._waiting=true;var g=a.formBox;var c=g.attr("action");var e=g.attr("method")||"POST";var h=g.attr("enctype")||"None";if(/^.*\/json($|;| )/i.test(h)){b.preventDefault();var f=hsAsFormData(g[0]);var d=jQuery.Event("willSave");g.trigger(d,[f,a]);if(d.isDefaultPrevented()){delete a._waiting;return}a.save(c,f,e,"json")}else{if(!/^multipart\/.*/i.test(h)){b.preventDefault();var f=hsAsFormData(g[0]);var d=jQuery.Event("willSave");g.trigger(d,[f,a]);if(d.isDefaultPrevented()){delete a._waiting;return}a.save(c,f,e,"form")}else{if(window.FormData){b.preventDefault();var f=hsToFormData(g[0]);var d=jQuery.Event("willSave");g.trigger(d,[f,a]);if(d.isDefaultPrevented()){delete a._waiting;return}a.save(c,f,e,"part")}else{var f=hsBeFormData(g[0]);var d=jQuery.Event("willSave");g.trigger(d,[f,a]);if(d.isDefaultPrevented()){b.preventDefault();delete a._waiting;return}a.swap(c,g)}}}})},saveBack:function(b){b=hsResponse(b,1);if(b.ok){var a=jQuery.Event("saveBack");this.formBox.trigger(a,[b,this]);if(a.isDefaultPrevented()){return}this.loadBox.hsClose();if(b.msg){this.note(b.msg,"success")}}else{var a=jQuery.Event("saveFail");this.formBox.trigger(a,[b,this]);if(a.isDefaultPrevented()){return}this.seterror(b.errs||{});if(b.msg){this.warn(b.msg,"warning")}else{if(!b.errs){this.warn(hsGetLang("error.undef"))}}}},swap:function(c,f){if(!f.attr("target")){var e=this;var a=hsSetParam(c,"cb","~");var b="_"+((new Date()).getTime()%86400000)+"_"+Math.floor(Math.random()*1000);var d="width:0; height:0; border:0; margin:0; padding:0; overflow:hidden; visibility:hidden;";var g=jQuery('<iframe src="about:blank" name="'+b+'" style="'+d+'"></iframe>');g.insertBefore(f);f.attr("target",b);f.attr("action",a);g.on("load",function(){var h=g[0].contentDocument||g[0].contentWindow.document;if(h.location.href==="about:blank"){return}var i=h.body.innerHTML.replace(/(^<PRE.*?>|<\/PRE>$)/igm,"");delete e._waiting;e.saveBack(i)})}},save:function(a,d,c,b){this.ajax({url:a,data:d,type:c,dataKind:b,dataType:"json",funcName:"save",async:false,cache:false,global:false,context:this,trigger:this.formBox,complete:function(e){delete this._waiting;this.saveBack(e)}})},ajax:function(){return jQuery.hsAjax.apply(window,arguments)},note:function(){return jQuery.hsNote.apply(window,arguments)},warn:function(){return jQuery.hsWarn.apply(window,arguments)},_doll__review:function(b,a,c){b.data("data",a)},_fill__review:function(l,q,b){if(q===undefined||q===null){return}if(l.is("ul,ol,.repeated,.multiple")){var o=l.data("data")||[];var f=l.attr("data-vk")||0;var s=l.attr("data-tk")||1;var p=jQuery(l.is("ul,ol")?"<li></li>":"<div></div>");var d={};var g,j,h;p.attr("class",l.attr("data-item-class"));p.attr("style",l.attr("data-item-style"));l.empty();if(!jQuery.isArray(q)){q=[q]}for(g=0;g<o.length;g++){j=o[g];d[j[s]]=j[f]}for(g=0;g<q.length;g++){j=q[g];if(jQuery.isPlainObject(j)||jQuery.isArray(j)){h=j[s];j=j[f]}else{h=d[j];if(h===undefined){h=j}}p.text(h);p.attr("title",h);p.attr("data-code",j);l.append(p.clone())}return}if(l.is("a,img,video,audio")){var r=!q?q:hsFixUri(q);l.filter("a:empty").text(q);l.filter("a").attr("href",r);l.filter("a.a-email").attr("href","mailto:"+q);l.filter("a.a-tel").attr("href","tel:"+q);l.filter("a.a-sms").attr("href","sms:"+q);l.filter("img,video,audio").attr("src",r);return}if(!l.is("input,select,textarea")){q=this._fill__format(l,q,b);if(jQuery.isArray(q)){q=q.join(", ")}}return q},_fill__format:function(d,c,g){if(c===undefined){return c}var e=d.data("format");if(e===undefined){return c}var b=[e];if(!jQuery.isArray(c)){c=[c]}Array.prototype.push.apply(b,c);return hsFormat.apply(window,b)},_doll__select:function(f,g,b){if(g===undefined){return}var c=f.attr("data-vk");if(!c){c=0}var j=f.attr("data-tk");if(!j){j=1}for(var e=0;e<g.length;e++){var d=hsGetValue(g[e],c);var h=hsGetValue(g[e],j);if(d&&this._opt_group_start&&d[0]==this._opt_group_start){if(f.is("optgroup")){f=f.parent();if(!h){continue}}f=jQuery("<optgroup></optgroup>").appendTo(f);f.attr("label",h).attr("data-value",d);continue}var a=jQuery("<option></option>");a.val(d).text(h).data("data",g[e]);f.append(a)}if(f.closest(".form-group").hasClass("has-error")){f.change()}},_doll__radio:function(f,h,a){if(h===undefined){return}var b=f.attr("data-vk");if(!b){b=0}var l=f.attr("data-tk");if(!l){l=1}for(var d=0;d<h.length;d++){var c=hsGetValue(h[d],b);var j=hsGetValue(h[d],l);if(c&&this._opt_group_start&&c[0]==this._opt_group_start){if(f.is("fieldset")){f=f.parent();if(!j){continue}}var g;f=jQuery("<fieldset></fieldset>").appendTo(f);g=jQuery("<legend></legend>").appendTo(f);g.text(j);f.attr("data-value",c);continue}var e=jQuery('<label><input type="radio"   /><span></span></label>');e.find("input").val(c).attr("name",a).data("data",h[d]);e.find("span").text(j);f.append(e)}if(f.closest(".form-group").hasClass("has-error")){f.find("input").first().change()}},_fill__radio:function(b,a,c){if(a===undefined){return}if(!jQuery.isArray(a)){a=[a]}b.find(":radio").val(a).first().change()},_doll__check:function(f,h,a){if(h===undefined){return}var b=f.attr("data-vk");if(!b){b=0}var l=f.attr("data-tk");if(!l){l=1}for(var d=0;d<h.length;d++){var c=hsGetValue(h[d],b);var j=hsGetValue(h[d],l);if(c&&this._opt_group_start&&c[0]==this._opt_group_start){if(f.is("fieldset")){f=f.parent();if(!j){continue}}var g;f=jQuery("<fieldset></fieldset>").appendTo(f);g=jQuery("<legend></legend>").appendTo(f);g.text(j);f.attr("data-value",c);continue}var e=jQuery('<label><input type="checkbox"/><span></span></label>');e.find("input").val(c).attr("name",a).data("data",h[d]);e.find("span").text(j);f.append(e)}if(f.closest(".form-group").hasClass("has-error")){f.find("input").first().change()}},_fill__check:function(b,a,c){if(a===undefined){return}if(!jQuery.isArray(a)){a=[a]}b.find(":checkbox").val(a).first().change()},_doll__checkset:function(k,o,b){if(o===undefined){return}var d=k.attr("data-vk");if(!d){d=0}var t=k.attr("data-tk");if(!t){t=1}var c=k.attr("data-vl");if(!c){c=0}var q=k.attr("data-tl");if(!q){q=1}var h=k.attr("data-body-class")||"checkbox";var a=k.attr("data-item-class")||"col-xs-6";for(var f=0;f<o.length;f++){var p=o[f][c];var r=o[f][q];var m=jQuery('<fieldset><legend data-toggle="hsDrop"><input  type="checkbox" class="checkall"/><b></b> <i class="caret"></i></legend><div class="dropdown-body clearfix"></div></fieldset>');k.append(m);m.find("b").text(r);m=m.find("div").addClass(h);for(var e=0;e<p.length;e++){var l=p[e];var g=jQuery('<label class="'+a+'"><input type="checkbox"/><span></span></label>');g.find("input").attr("name",b).data(l).val(hsGetValue(l,d));g.find("span").text(hsGetValue(l,t));m.append(g)}}if(k.closest(".form-group").hasClass("has-error")){k.find("input").first().change()}k.hsReady()},_fill__checkset:function(b,a,c){if(a===undefined){return}b.find(":checkbox").not(".checkall").val(a);b.find("fieldset").each(function(){var g=$(this);var e=g.find(":checkbox:not(.checkall)").length;var d=g.find(":checkbox:not(.checkall):checked").length;var f=e&&e===d?true:(d&&e!==d?null:false);g.find(".checkall").prop("choosed",f)})},_fill__htime:function(e,a,d){if(a===undefined){return a}var c=new Date();var b=hsPrsDate(a,hsGetLang("datetime.format"));if(c.getFullYear()==b.getFullYear()&&c.getMonth()==b.getMonth()&&c.getDate()==b.getDate()){return hsGetLang("time.today",[hsFmtDate(a,hsGetLang("time.format"))])}else{return hsFmtDate(a,hsGetLang("date.format"))}},_fill__hdate:function(e,a,d){if(a===undefined){return a}var c=new Date();var b=hsPrsDate(a,hsGetLang("date.format"));if(c.getFullYear()==b.getFullYear()&&c.getMonth()==b.getMonth()&&c.getDate()==b.getDate()){return hsGetLang("date.today")}else{return hsFmtDate(a,hsGetLang("date.format"))}},_fill__datetime:function(c,a,b){if(a===undefined){return a}return hsFmtDate(a,c.data("format")||hsGetLang("datetime.format"))},_fill__date:function(c,a,b){if(a===undefined){return a}return hsFmtDate(a,c.data("format")||hsGetLang("date.format"))},_fill__time:function(c,a,b){if(a===undefined){return a}return hsFmtDate(a,c.data("format")||hsGetLang("time.format"))},_fill__html:function(c,a,b){if(a===undefined){return a}jQuery(c).html(a);return false},_fill__text:function(c,a,b){if(a===undefined){return a}jQuery(c).text(a);return false},valiInit:function(){var a=this;this.formBox.attr("novalidate","novalidate");this.formBox.on("reset",function(b){if(b.isDefaultPrevented()){return}return a.verified()});this.formBox.on("submit",function(b){if(b.isDefaultPrevented()){return}return a.verifies()});this.formBox.on("change","input,select,textarea,[data-fn]",function(){var c=jQuery(this);var b=c.attr("name")||c.attr("data-fn");if(b){a.validate(b)}})},verified:function(){this.formBox.find(".form-group").removeClass("has-error").find(".text-error").empty();return true},verifies:function(){this.verified();var b=true;var a={};this.formBox.find("input,select,textarea,[data-fn]").not(".form-ignored").each(function(){var e=jQuery(this);var f=e.attr("name")||e.attr("data-fn");if(!f){return true}if(a[f]===undefined){a[f]=e}else{a[f]=a[f].add(e)}});for(var c in a){var d=this.validate(a[c]);if(d==false){b=false}}if(!b){this.warn(hsGetLang("form.invalid"),"warning")}return b},validate:function(c){if(c===undefined){return this.verifies()}var d;c=this.getinput(c);d=this.getvalue(c);for(var a in this.rules){if(!c.is(a)){continue}var b=this.rules[a].call(this,d,c);if(b!==true){b=b||hsGetLang("form.haserror");this.seterror(c,b);return false}else{this.seterror(c)}}return true},seterror:function(f,d){if(d===undefined&&jQuery.isPlainObject(f)){this.verified();for(var h in f){var g=f[h];this.seterror(h,g)}return}f=this.getinput(f);var a=f.closest(".form-group");var c=a.find(".text-error");var b=a.find(".control-label");if(c.size()==0){c=jQuery('<p class="text-error help-block"></p>').appendTo(a);if(b.hasClass(".form-control-static")){c.addClass("form-control-static")}}if(d===undefined){a.removeClass("has-error");c.addClass("invisible")}else{a.addClass("has-error");c.removeClass("invisible");c.text(d)}},geterror:function(d,c,e){var f=c.replace(/^form\./,"").replace(/\./g,"-");f=d.attr("data-"+f+"-error")||d.attr("data-error");if(f){c=f}if(this.rmsgs[c]){c=this.rmsgs[c]}var b=d.attr("data-label");if(b==null){b=d.closest(".form-group").find(".control-label").text()}if(b){if(jQuery.isArray(e)){var g={};for(var a=0;a<e.length;a++){g[a+""]=e[a]}e=g}else{if(e==null){e={}}}e._=hsGetLang(b)}return hsGetLang(c,e)},getinput:function(c){if(typeof c!="string"){return jQuery(c)}do{var d=c;c=this.formBox.find('[name="'+d+'"],[data-fn="'+d+'"]');if(c.size()){break}var b=/^(.*)\[(\d+)\]$/.exec(d);if(b==null){break}var a=b[2];d=b[1];c=this.formBox.find('[name="'+d+'"],[data-fn="'+d+'"]');if(c.size()){return c.eq(parseInt(a))}c=this.formBox.find('[name="'+d+'."],[data-fn="'+d+'."]');if(c.size()){break}c=this.formBox.find('[name="'+d+'[]"],[data-fn="'+d+'[]"]');if(c.size()){break}}while(false);return c.not(".form-ignored")},getvalue:function(a){if(a.is("input,select,textarea")===false){a=a.find("input")}if(a.is(":checkbox")){var b=[];a.filter(":checked").each(function(){b.push($(this).val())});return b}if(a.is(":radio")){return a.filter(":checked").last().val()}if(/(\[\]|\.\.|\.$)/.test(a.attr("name"))){var b=[];a.each(function(){b.push($(this).val())});return b}else{return a.last().val()}},rmsgs:{},rules:{"[required],[data-required]":function(d,c){if(c.is(":radio,:checkbox")){if(!c.filter(":checked").length){return this.geterror(c,"form.requires")}}else{if(c.is(".checkbox")){if(!c.find(":checked").length){return this.geterror(c,"form.requires")}}else{if(c.is("ul,div")){if(!c.find("input").length){return this.geterror(c,"form.requires")}}else{if(c.is(":file")){if(!d&&!c.data("value")){return this.geterror(c,"form.requires")}var a=c.filter(":hidden");var b=c.parent().closest(".file-input");if(!d&&!a.size()&&b.size()){return this.geterror(c,"form.requires")}}else{if(c.is("select")){if(!d){return this.geterror(c,"form.requires")}}else{if(!d){return this.geterror(c,"form.required")}}}}}}return true},"[pattern],[data-pattern]":function(d,c){var a=c.attr("pattern")||c.attr("data-pattern");var b=/^\/(.*)\/([gim])?$/.exec(a);if(b){a=new RegExp(b[1],b[2])}else{a=new RegExp(a)}if(!a.test(d)){return this.geterror(c,"form.is.not.match")}return true},"[maxlength],[data-maxlength]":function(c,b){var a=b.attr("maxlength")||b.attr("data-maxlength");if(a<c.length){return this.geterror(b,"form.gt.maxlength",[a])}return true},"[minlength],[data-minlength]":function(c,b){var a=b.attr("minlength")||b.attr("data-minlength");if(a>c.length){return this.geterror(b,"form.lt.minlength",[a])}return true},"[maxrepeat],[data-maxrepeat]":function(c,b){var a=b.attr("maxrepeat")||b.attr("data-maxrepeat");if(a<b.find("[type=hidden],:checked,:selected,:file,:text").size()){return this.geterror(b,"form.gt.maxrepeat",[a])}return true},"[minrepeat],[data-minrepeat]":function(c,b){var a=b.attr("minrepeat")||b.attr("data-minrepeat");if(a>b.find("[type=hidden],:checked,:selected,:file,:text").size()){return this.geterror(b,"form.lt.minrepeat",[a])}return true},"[max],[data-max]":function(d,c){var b=this.rules["[type=number],.input-number"].call(this,d,c);if(b!==true){return b}var a=c.attr("max")||c.attr("data-max");if(parseFloat(d)>parseFloat(a)){return this.geterror(c,"form.gt.max",[a])}return true},"[min],[data-min]":function(d,c){var b=this.rules["[type=number],.input-number"].call(this,d,c);if(b!==true){return b}var a=c.attr("min")||c.attr("data-min");if(parseFloat(d)<parseFloat(a)){return this.geterror(c,"form.lt.min",[a])}return true},"[type=number],.input-number":function(b,a){if(!b&&a[0]&&a[0].validity&&a[0].validity.badInput){return this.geterror(a,"form.is.not.number")}if(!/^-?[0-9]*(\.[0-9]+)?$/.test(b)){return this.geterror(a,"form.is.not.number")}return true},"[type=color],.input-color":function(b,a){if(!b){return true}if(!/^#[0-9A-Fa-f]{6}$/.test(b)){return this.geterror(a,"form.is.not.color")}return true},"[type=email],.input-email":function(b,a){if(!b){return true}if(!/^\w+([-.]\w+)*@\w+([-.]\w+)*$/.test(b)){return this.geterror(a,"form.is.not.email")}return true},"[type=url],.input-url":function(b,a){if(!b){return true}if(!/^([a-z]+:)?\/\/[^\s]+$/.test(b)){return this.geterror(a,"form.is.not.url")}return true},"[type=tel],.input-tel":function(b,a){if(!b){return true}if(!/^\+?[0-9][\d\-]+[0-9]$/.test(b)){return this.geterror(a,"form.is.not.tel")}return true},"[data-validate]":function(d,c){var b=c.attr("data-validate");try{if(c.data(b)){return c.data(b).call(this,d,c)}else{if(window[b]){return window[b].call(this,d,c)}else{if(window.console){if(window.console.error){window.console.error(b+" not found!")}else{window.console.log(b+" not found!")}}}}return false}catch(a){if(window.console){if(window.console.error){window.console.error(b+" run error: "+a,d,c)}else{window.console.log(b+" run error: "+a,d,c)}}return false}},"[data-verify]":function(f,d,b){if(!f){return true}var a=true;var e=this.formBox;var c=d.attr("name")||d.attr("data-fn");c=c.replace("..",".").replace("[]","").replace(/\.$/,"");if(!b){b=d.attr("data-verify")}b=b.replace(/\$\{(.*?)\}/g,function(g,h){return encodeURIComponent(e.find("[name='"+h+"']").not(".form-ignored").val()||"")});this.ajax({url:b,data:{n:c,v:f},type:"POST",dataType:"json",funcName:"veri",async:false,cache:false,global:false,context:this,complete:function(g){g=hsResponse(g);if(g.list!==undefined){a=d.attr("data-unique")?g.list.length==0:g.list.length!=0}else{if(g.page!==undefined){a=d.attr("data-unique")?g.page.count==0:g.page.count!=0}else{if(g.rn!==undefined){g.rn=parseInt(g.rn);a=g.rn?true:(g.msg?g.msg:false)}else{a=g.ok?true:(g.msg?g.msg:false)}}}},error:function(){a=false}});return a},"[data-unique]":function(c,b){var a=this.rules["[data-verify]"].call(this,c,b,b.attr("data-unique"));if(typeof a==="string"){return a}else{if(!a){return this.geterror(b,"form.is.not.unique")}}return true},"[data-exists]":function(c,b){var a=this.rules["[data-verify]"].call(this,c,b,b.attr("data-exists"));if(typeof a==="string"){return a}else{if(!a){return this.geterror(b,"form.is.not.exists")}}return true},"[data-repeat]":function(c,b){var a=b.attr("data-repeat");if(c!=this.getvalue(this.getinput(a))){return this.geterror(b,"form.is.not.repeat")}return true},"[data-relate]":function(c,b){var a=b.attr("data-relate");if(this.getvalue(this.getinput(a))){this.validate(a)}return true}}};jQuery.fn.hsForm=function(a){return this.hsBind(HsForm,a)};(function(a){a(document).on("change","fieldset .checkall",function(b){this.indeterminate=false;var d=a(this).closest("fieldset");var c=a(this).prop("checked");d.find(":checkbox").not(".checkall").prop("checked",c).trigger("change")}).on("change","fieldset :checkbox:not(.checkall)",function(d){var f=a(this).closest("fieldset");var c=f.find(":checkbox:not(.checkall)").length;var b=f.find(":checkbox:not(.checkall):checked").length;var e=c&&c===b?true:(b&&c!==b?null:false);f.find(".checkall").prop("choosed",e)}).on("click","[data-toggle=hsEdit]",function(b){var f=a(this).closest(".HsForm").data("HsForm");var e=function(){a(this).on("saveBack",function(h,j,g){var i=jQuery.Event("saveBack");i.relatedTarget=h.target;i.relatedHsInst=g;f.formBox.trigger(i,[j,f]);if(i.isDefaultPrevented()){return}f.load()})};var d=a(this).attr("data-target");var c=a(this).attr("data-href");c=hsFixPms(c,this);if(d){d=a(this).hsFind(d);d.hsOpen(c,e)}else{a.hsOpen(c,e)}b.stopPropagation()})})(jQuery);
function HsList(b,a){b=jQuery(b);var q=b.closest(".loadbox");var c=b.find(".listbox");var p=b.find(".pagebox");var l=b.find(".findbox");var j=hsGetValue(a,"loadUrl");var g=hsGetValue(a,"sendUrls");var f=hsGetValue(a,"openUrls");var e=hsGetValue(a,"loadData");this.sortKey=hsGetValue(a,"sortKey",hsGetConf("ob.key","ob"));this.pageKey=hsGetValue(a,"pageKey",hsGetConf("pn.key","pn"));this.rowsKey=hsGetValue(a,"rowsKey",hsGetConf("rn.key","rn"));this.rowsNum=hsGetValue(a,"rowsNum",hsGetConf("rows.per.page",20));this.pugsNum=hsGetValue(a,"pugsNum",hsGetConf("pugs.for.page",5));this.context=b;this.loadBox=q;this.listBox=c;this.pageBox=p;this._url="";this._data=[];if(a){for(var i in a){if("_"===i.substring(0,1)||this[i]!==undefined){this[i]=a[i]}}}var o=this;var h,d,t;function s(v){var z=jQuery(this);var k=v.data[1];var w=v.data[2];var x=z.closest(".tooltip");if(x.length){z=x.data("trigger")}if(typeof(w)==="function"){w.call(o,z,k);return}var y=o.getIds(z);if(y==null){return}w=hsFixPms(w,q);o.send(z,k,w,y)}if(g){jQuery.each(g,function(m,k){switch(k.length){case 3:t=k[0];d=k[1];h=k[2];break;case 2:t=k[0];d=k[1];h=undefined;break;default:return}if(typeof(d)!=="string"||/^[@%\^\-+~>*#]/.test(d)){b.hsFind(d).on("click",[d,h,t],s)}else{b.on("click",d,[d,h,t],s)}})}function r(v){var z=jQuery(this);var k=v.data[1];var w=v.data[2];var x=z.closest(".tooltip");if(x.length){z=x.data("trigger")}if(typeof(w)==="function"){w.call(o,z,k);return}var y=o.getIds(z);if(y==null){return}w=hsFixPms(w,q);o.open(z,k,w,y)}if(f){jQuery.each(f,function(m,k){switch(k.length){case 3:t=k[0];d=k[1];h=k[2];break;case 2:t=k[0];d=k[1];h=undefined;break;default:return}if(typeof(d)!=="string"||/^[@%\^\-+~>*#]/.test(d)){b.hsFind(d).on("click",[d,h,t],r)}else{b.on("click",d,[d,h,t],r)}})}if(l.length){l.on("submit",function(){o.load(null,hsSerialMix(e,l));return false})}if(j){this.load(hsFixPms(j,q),hsSerialMix(e,l))}}HsList.prototype={load:function(a,b){b=hsSerialObj(b);if(a){this._url=a}if(b){this._data=b}this.ajax({url:this._url,data:this._data,type:"POST",dataType:"json",funcName:"load",cache:false,global:false,context:this,complete:this.loadBack})},loadBack:function(c){c=hsResponse(c);if(c.ok===false){return}this.listBox.trigger("loadBack",[c,this]);var b=c.list||[];var a=c.page||{};if(!c.page){if(!c.list||!c.list.length){a={state:1}}else{a={state:-1}}}this.fillList(b);this.fillPage(a);this.listBox.trigger("loadOver",[c,this])},fillList:function(list){var ths,th,tb,tr,td,i,j,n,t,v,f;ths=this.listBox.find("thead th,thead td");tb=this.listBox.find("tbody");tb.empty();var sn=hsGetSeria(this._data,this.sortKey);if(!sn){sn=hsGetParam(this._url,this.sortKey)}if(jQuery.isArray(sn)){sn=sn.join(",")}for(i=0;i<ths.length;i++){th=jQuery(ths[i]);f=th.data("fl");if(f&&typeof f!="function"){try{f=eval("(null||function(list,v,n){return "+f+";})")}catch(e){throw new Error("Parse list data-fl error: "+e)}th.data("fl",f)}if(th.hasClass("sortable")){n=th.data("fn");t=th.data("ft");this._fill__sort(th,sn,n,t)}}this._list=list;for(i=0;i<list.length;i++){this._info=list[i];tr=jQuery("<tr></tr>").appendTo(tb);for(j=0;j<ths.length;j++){th=jQuery(ths[j]);td=jQuery("<td></td>").appendTo(tr);td.attr("class",th.attr("class"));td.attr("style",th.attr("style"));td.data(th.data());n=th.data("fn");t=th.data("ft");f=th.data("fl");if(n!==undefined){v=hsGetValue(list[i],n);if(v===undefined){v=list[i][n]}}else{v=undefined}if(t===undefined){t="_review"}if(f){v=f.call(td[0],this,v,n)}if(n&&this["_fill_"+n]!==undefined){v=this["_fill_"+n].call(this,td,v,n)}else{if(t&&this["_fill_"+t]!==undefined){v=this["_fill_"+t].call(this,td,v,n)}}if(!v&&v!==0&&v!==""){continue}if(td.is("input,select,textarea")){td.val(v)}else{td.text(v)}}}delete this._list;if(typeof(this._info)!=="undefined"){delete this._info}},fillPage:function(k){if(k[this._ps_key]!="0"){this.pageBox.empty();this.listBox.show()}else{if(k[this._rc_key]=="0"||k[this._pc_key]=="0"){this.pageBox.empty().append('<div class="alert alert-warning" style="width: 100%;">'+(this._empty_err||hsGetLang("list.empty"))+"</div>");this.listBox.hide();return}else{this.pageBox.empty().append('<div class="alert alert-warning" style="width: 100%;">'+(this._above_err||hsGetLang("list.above"))+"</div>");this.listBox.hide();var j=this;hsSetSeria(this._data,this.pageKey);setTimeout(function(){j.load()},5000);return}}var g,a,b,o,c,h,j=this;a=k[this.rowsKey]?parseInt(k[this.rowsKey]):this.rowsNum;b=k[this.pageKey]?parseInt(k[this.pageKey]):1;o=k[this._pc_key]?parseInt(k[this._pc_key]):1;c=b-Math.floor(this.pugsNum/2);if(c<1){c=1}h=c+this.pugsNum-1;if(h>o){h=o}c=h-this.pugsNum+1;if(c<1){c=1}var d=jQuery('<ul class="pagination pull-left"></ul>').appendTo(this.pageBox);var q=jQuery('<em class="page-text pull-right"></em>').appendTo(this.pageBox);var m=d;var f=d;if(k[this._ps_key]=="2"){q.text(hsGetLang("list.page.unfo",k))}else{q.text(hsGetLang("list.page.info",k))}q.append(jQuery('<a href="javascript:;" class="bi bi-hi-page"></a>'));if(1<b){f.append(jQuery('<li class="page-prev"><a href="javascript:;" data-pn="'+(b-1)+'" title="'+hsGetLang("list.prev.pagi")+'">&laquo;</a></li>'))}else{f.append(jQuery('<li class="page-prev disabled"><a href="javascript:;" title="'+hsGetLang("list.prev.page")+'">&laquo;</a></li>'))}for(g=c;g<h+1;g++){m.append(jQuery('<li class="'+(g!=b?"page-link":"page-curr active")+'"><a href="javascript:;" data-pn="'+g+'">'+g+"</a></li>"))}if(o>b){f.append(jQuery('<li class="page-next"><a href="javascript:;" data-pn="'+(b+1)+'" title="'+hsGetLang("list.next.pagi")+'">&raquo;</a></li>'))}else{f.append(jQuery('<li class="page-next disabled"><a href="javascript:;" title="'+hsGetLang("list.next.page")+'">&raquo;</a></li>'))}var n=null;var e=function(i){if(n){clearTimeout(n)}hsSetSeria(j._data,j.pageKey,i);j.load()};var l=function(i){if(n){clearTimeout(n)}n=setTimeout(function(){e(i)},500)};this.pageBox.find(".page-link a").on("click",function(i){e(jQuery(this).attr("data-pn"));i.preventDefault()});this.pageBox.find(".page-prev a").on("click",function(i){l(jQuery(this).attr("data-pn"));i.preventDefault()});this.pageBox.find(".page-next a").on("click",function(i){l(jQuery(this).attr("data-pn"));i.preventDefault()});this.pageBox.find(".page-prev a").on("dblclick",function(i){e(1);i.preventDefault()});this.pageBox.find(".page-next a").on("dblclick",function(i){e(o);i.preventDefault()});this.pageBox.find(".page-text a").on("click",function(i){j.gotoPage(b,a);i.preventDefault()})},gotoPage:function(a,c){var b=this;jQuery.hsMask({title:"请输入页码和条数",mode:"warn",html:'<form autocomplete="off" novalidate="novalidate"><span> 跳转到第 </span><input type="number" name="pn" value="'+a+'" class="form-control" style="display:inline-block;width:6em;" step="1"  min="1"  /><span> 页, </span><span> 平均每页 </span><input type="number" name="rn" value="'+c+'" class="form-control" style="display:inline-block;width:6em;" step="10" min="10" max="100"/><span> 条. </span><button type="submit" class="invisible"></button></form>'},{glass:"btn-primary",label:hsGetLang("ensure"),click:function(){var e=jQuery(this).closest(".alert-content").find("form");var f=parseInt(e.find("[name='rn']").val());var d=parseInt(e.find("[name='pn']").val());if(isNaN(d)||isNaN(f)||d<1||f<10||f>100){alert("输入错误, 页码需大于或等于1, 行数需10到100之间!");return false}jQuery(this).closest(".modal").find(":submit").click()}},{glass:"btn-default",label:hsGetLang("cancel")}).submit(function(d){d.preventDefault();d.stopPropagation();jQuery(this).closest(".modal").modal("hide");var f=$(this).find("[name=rn]").val();var e=$(this).find("[name=pn]").val();b._data=hsSerialArr(b._data);b._url=hsSetParam(b._url,b.rowsKey,f);hsSetSeria(b._data,b.pageKey,e);b.load()})},_ps_key:"state",_pc_key:"pages",_rc_key:"count",send:function(b,f,a,e){b=jQuery(b);var d=this;var c=function(){var g=jQuery.extend({},hsSerialDat(a),hsSerialDat(e));d.ajax({url:a,data:e,type:"POST",dataType:"json",funcName:"send",cache:false,global:false,context:d,trigger:b,complete:function(h){this.sendBack(b,h,g)}})};if(!f){c()}else{this.warn(f,"warning",c,null)}},sendBack:function(b,d,c){b=jQuery(b);d=hsResponse(d,1);if(d.ok){if(d.msg){this.note(d.msg,"success")}}else{if(d.msg){this.warn(d.msg,"warning")}else{this.warn(hsGetLang("error.undef"))}return}var a=jQuery.Event("sendBack");b.trigger(a,[d,c,this]);if(a.isDefaultPrevented()){return}this.load()},open:function(c,g,b,d){if(-1!=b.indexOf("{ID}")){var e,j,a=[];j=hsSerialArr(d);for(e=0;e<j.length;e++){a.push(encodeURIComponent(j[e].value))}b=b.replace("{ID}",a.join(","));d=undefined}c=jQuery(c);var h=this;var f=jQuery.extend({},hsSerialDat(b),hsSerialDat(d));if(g){if(g instanceof String&&/^_/.test(g)){b=hsSetPms(b,d);window.open(b,g);return}g=c.hsFind(g);g.hsOpen(b,d,function(){h.openBack(c,jQuery(this),f)}).data("rel",c.closest(".loadbox").get(0))}else{jQuery.hsOpen(b,d,function(){h.openBack(c,jQuery(this),f)})}},openBack:function(a,c,d){a=jQuery(a);var b=this;a.trigger("openBack",[c,d,this]);c.on("saveBack",function(f,h,e){var g=jQuery.Event("saveBack");g.relatedTarget=f.target;g.relatedHsInst=e;a.trigger(g,[h,d,b]);if(g.isDefaultPrevented()){return}b.load()})},ajax:function(){return jQuery.hsAjax.apply(window,arguments)},note:function(){return jQuery.hsNote.apply(window,arguments)},warn:function(){return jQuery.hsWarn.apply(window,arguments)},getAll:function(){var a=this.context.find(".checkone").filter(":checked");if(a.length===0){alert(hsGetLang("list.get.all"));return null}else{return a}},getOne:function(){var a=this.context.find(".checkone").filter(":checked");if(a.length!==1){alert(hsGetLang("list.get.one"));return null}else{return a}},getRow:function(b){var a=jQuery(b).closest("tr,.itembox",this.listBox).find(".checkone,.row-id,[data-fn=id],[data-ft=id]").first();if(a.is(".checkone")&&a.is(":checkbox,:radio")){a.not(":checked").prop("checked",true).change();a.closest("tr,.itembox").siblings("tr,.itembox").find(":checked.checkone").prop("checked",false).change()}return a},getIds:function(a){a=jQuery(a);if(a.hasClass("for-checks")){return this.getAll()}else{if(a.hasClass("for-choose")){return this.getOne()}else{return this.getRow(a)}}},_fill__review:function(d,a,c){if(a===undefined||a===null){return}if(d.is("a,img,video,audio")){var b=!a?a:hsFixUri(a);d.filter("a:empty").text(a);d.filter("a").attr("href",b);d.filter("a.a-email").attr("href","mailto:"+a);d.filter("a.a-tel").attr("href","tel:"+a);d.filter("a.a-sms").attr("href","sms:"+a);d.filter("img,video,audio").attr("src",b);return}if(!d.is("input,select,textarea")){a=this._fill__format(d,a,c);if(jQuery.isArray(a)){a=a.join(", ")}}return a},_fill__format:function(g,c,e){if(c===undefined){return c}var d=g.data("format");if(d===undefined){return c}var b=[d];if(!jQuery.isArray(c)){c=[c]}Array.prototype.push.apply(b,c);return hsFormat.apply(window,b)},_fill__admin:function(c,a,b){this.listBox.find("thead th,thead td").eq(c.index()).find(".invisible").clone().removeClass("invisible").appendTo(c);jQuery(c).find("input:hidden").val(a);return false},_fill__check:function(c,a,b){jQuery('<input type="checkbox" class="checkone"/>').attr("name",b).val(a).appendTo(c);return false},_fill__radio:function(c,a,b){jQuery('<input type="radio" class="checkone"/>').attr("name",b).val(a).appendTo(c);return false},_fill__rowid:function(c,a,b){jQuery('<input type="hidden" class="row-id" />').attr("name",b).val(a).appendTo(c);return false},_fill__email:function(c,a,b){if(!a){return a}b="mailto:"+a;jQuery('<a target="_blank"></a>').attr("href",b).text(a).appendTo(c);return false},_fill__ulink:function(c,a,b){if(!a){return a}a=hsFixUri(a);jQuery('<a target="_blank"></a>').attr("href",a).text(a).appendTo(c);return false},_fill__nlink:function(c,a,b){b=b.replace(/(\[|\.)/,"-").replace(/(\]|\-$)/,"");jQuery('<a href="javascript:;"></a>').addClass("a-"+b).text(a).appendTo(c);return false},_fill__htime:function(e,a,d){if(a===undefined){return a}var c=new Date();var b=hsPrsDate(a,hsGetLang("datetime.format"));e.attr("title",this._fill__datetime(e,a,d));if(c.getFullYear()==b.getFullYear()&&c.getMonth()==b.getMonth()&&c.getDate()==b.getDate()){return hsGetLang("time.today",[hsFmtDate(a,hsGetLang("time.format"))])}else{return hsFmtDate(a,hsGetLang("date.format"))}},_fill__hdate:function(e,a,d){if(a===undefined){return a}var c=new Date();var b=hsPrsDate(a,hsGetLang("date.format"));e.attr("title",this._fill__datetime(e,a,d));if(c.getFullYear()==b.getFullYear()&&c.getMonth()==b.getMonth()&&c.getDate()==b.getDate()){return hsGetLang("date.today")}else{return hsFmtDate(a,hsGetLang("date.format"))}},_fill__datetime:function(c,a,b){if(a===undefined){return a}return hsFmtDate(a,c.data("format")||hsGetLang("datetime.format"))},_fill__date:function(c,a,b){if(a===undefined){return a}return hsFmtDate(a,c.data("format")||hsGetLang("date.format"))},_fill__time:function(c,a,b){if(a===undefined){return a}return hsFmtDate(a,c.data("format")||hsGetLang("time.format"))},_fill__html:function(c,a,b){if(a===undefined){return a}jQuery(c).html(a);return false},_fill__text:function(c,a,b){if(a===undefined){return a}jQuery(c).text(a);return false},_fill__sort:function(c,a,d){if(c.find(".sort-ico").size()===0){var b=this;c.click(function(){var e=null;if(!!c.hasClass("sort-asc")){e=b._sort_esc(c,d)}else{if(!c.hasClass("sort-esc")){e=b._sort_asc(c,d)}}hsSetSeria(b._data,b.sortKey,e);b.load()});c.append('<span class="sort-ico"></span>')}c.removeClass("sort-asc sort-esc");if(a===this._sort_asc(c,d)){c.addClass("sort-asc")}else{if(a===this._sort_esc(c,d)){c.addClass("sort-esc")}}},_sort_asc:function(a,b){return a.data("ob")||b},_sort_esc:function(a,b){return a.data("od")||(this._desc==="-"?this._desc+this._sort_asc(a,b):this._sort_asc(a,b)+this._desc)},_desc:"!"};function hsListFillMore(a){HsList.prototype.fillPage.call(this,a);this.pageBox.find(".page-text").remove();this.pageBox.find(".pagination").removeClass("pull-left")}function hsListFillLess(a){HsList.prototype.fillPage.call(this,a);this.pageBox.find(".page-text").remove();this.pageBox.find(".page-link").remove();this.pageBox.find(".page-curr").remove();this.pageBox.find(".pagination").removeClass("pull-left").removeClass("pagination").addClass("pager");this.pageBox.find(".page-prev").addClass("previous").find("a").text(hsGetLang("list.prev.page"));this.pageBox.find(".page-next").addClass("next").find("a").text(hsGetLang("list.next.page"))}function hsListFillNext(f){if(f[this._ps_key]=="0"){if(f[this._pc_key]=="0"||f[this._rc_key]=="0"){this.warn(this._empty_err||hsGetLang("list.empty"),"warning");return}else{this.warn(this._above_err||hsGetLang("list.above"),"warning");return}}var e=f[this.rowsKey]?parseInt(f[this.rowsKey]):this.rowsNum;var g=f[this.pageKey]?parseInt(f[this.pageKey]):1;var b=f[this._pc_key]?parseInt(f[this._pc_key]):(f[this._rc_key]==0?g-1:(f[this._rc_key]==e?g+1:g));var a=this.pageBox.find("[data-pn]");if(a.size()===0){this.pageBox.append(jQuery('<ul class="pager"></ul>').append(jQuery('<li class="page-prev"><a href="javascript:;" data-pn="">'+hsGetLang("list.prev.page")+"</a></li>")).append(jQuery('<li class="page-curr active"><a href="javascript:;"></a></li>')).append(jQuery('<li class="page-next"><a href="javascript:;" data-pn="">'+hsGetLang("list.next.page")+"</a></li>")));a=this.pageBox.find("[data-pn]")}var c=this.pageBox.find(".page-curr a");if(c.size()===0){c=this.pageBox.find(".page-curr")}if(f[this._ps_key]=="2"){c.text(g)}else{c.text(g+"/"+b)}if(g>1){c=a.closest(".page-prev").removeClass("disabled");c.filter("[data-pn]").attr("data-pn",g-1);c.find("[data-pn]").attr("data-pn",g-1)}else{c=a.closest(".page-prev").addClass("disabled");c.filter("[data-pn]").attr("data-pn",1);c.find("[data-pn]").attr("data-pn",1)}if(g<b){c=a.closest(".page-next").removeClass("disabled");c.filter("[data-pn]").attr("data-pn",g+1);c.find("[data-pn]").attr("data-pn",g+1)}else{c=a.closest(".page-next").addClass("disabled");c.filter("[data-pn]").attr("data-pn",b);c.find("[data-pn]").attr("data-pn",b)}if(!this.pageBox.data("inited")){this.pageBox.data("inited",1);var d=this;this.pageBox.on("click","[data-pn]",function(h){h.preventDefault();var i=jQuery(this);var j=i.data("pn");var k=d.pageKey;if(i.prop("disabled")){return}hsSetSeria(d._data,k,j);d.load()})}}function hsListFillItem(list){var that=this;var tt,tr,td,n,t,v,f;if(!this.itemBox){this.itemBox=this.context.find(".itembox:hidden:first")}tt=this.itemBox;if(!this._keep_prev||!(this._keep_void&&list.length==0)){this.listBox.children().not(tt).remove()}this._list=list;for(var i=0;i<list.length;i++){this._info=list[i];tr=tt.clone();tr.find("[data-fn],[data-ft],[data-fl]").each(function(){td=jQuery(this);n=td.data("fn");t=td.data("ft");f=td.data("fl");if(n!==undefined){v=hsGetValue(list[i],n);if(v===undefined){v=list[i][n]}}else{v=undefined}if(f&&typeof f!="function"){try{f=eval("(null||function(list,v,n){return "+f+";})")}catch(e){throw new Error("Parse list data-fl error: "+e)}td.data("fl",f)}if(f){v=f.call(td[0],that,v,n)}if(n&&that["_fill_"+n]!==undefined){v=that["_fill_"+n].call(that,td,v,n)}else{if(t&&that["_fill_"+t]!==undefined){v=that["_fill_"+t].call(that,td,v,n)}}if(!v&&v!==0&&v!==""){return}td.text(v)});tr.css("display","");this.listBox.append(tr)}delete this._list;if(typeof(this._info)!=="undefined"){delete this._info}}jQuery.fn.hsList=function(a){return this.hsBind(HsList,a)};(function(a){a(document).on("mouseover",".table-responsive-revised th,.table-responsive-revised td",function(b){if(a(this).children().not("a,b,i,sub,sup,span").size()){return}if(!a(this).is("._title")){if(!a(this).attr("title")&&!a(this).data("title")){a(this).addClass("_title")}else{return}}if(this.offsetWidth<this.scrollWidth){var c=a(this).text();a(this).attr("title",c)}else{a(this).attr("title","")}}).on("mouseout",".table-responsive-revised th,.table-responsive-revised td",function(b){if(a(this).children().not("a,b,i,sub,sup,span").size()){return}if(a(this).is("._title")){a(this).attr("title","")}}).on("click",".listbox tbody td",function(b){if(a(b.target).is("a,input,textarea,button,select,option")||a(this).is(".dont-check,._admin,._amenu")){return}var d=a(this).closest("tr");var c=d.find(".checkone");if(c.is(":disabled")){return}c.prop("checked",!c.prop("checked")).change();if(this!==c.closest("td")[0]){d.closest("tbody").find(".checkone:checked").not(":disabled").not(c).prop("checked",false).change()}}).on("change",".HsList .checkone",function(){var e=a(this).closest(".HsList");var c=a(this).prop("checked");var b=e.find(".checkone").not(":disabled").length;var d=e.find(".checkone").not(":disabled").filter(":checked").length;var f=b&&b==d?true:(d&&d!=b?null:false);a(this).closest("tr").toggleClass("active",c);e.find(".checkall").prop("choosed",f);e.find(".for-choose").prop("disabled",1!=d);e.find(".for-checks").prop("disabled",0==d);if(a(this).is(":radio")&&c){a(this).closest("tr").siblings().removeClass("active")}}).on("change",".HsList .checkall",function(){var c=a(this).closest(".HsList");var b=a(this).prop("checked");var d=c.find(".checkone").not(":disabled");a(d).prop("checked",b).trigger("change");a(this).prop("choosed",b)}).on("loadOver",".HsList .listbox",function(){var b=a(this).closest(".HsList");b.find(".for-choose, .for-checks").prop("disabled",true);b.find(".checkall").prop("checked",false).prop("choosed",false)})})(jQuery);
function HsTree(c,i){c=jQuery(c);var j=c.closest(".loadbox");var l=c.find(".treebox");var s=c.find(".findbox");var g=hsGetValue(i,"loadUrl");var d=hsGetValue(i,"sendUrls");var v=hsGetValue(i,"openUrls");var e=hsGetValue(i,"linkUrls");var a=hsGetValue(i,"loadData");this.idKey=hsGetValue(i,"idKey","id");this.pidKey=hsGetValue(i,"pidKey","pid");this.nameKey=hsGetValue(i,"nameKey","name");this.noteKey=hsGetValue(i,"noteKey");this.typeKey=hsGetValue(i,"typeKey");this.cnumKey=hsGetValue(i,"cnumKey");var b={id:hsGetValue(i,"rootId",hsGetConf("tree.root.id","0")),name:hsGetValue(i,"rootName",hsGetLang("tree.root.name")),note:hsGetValue(i,"rootNote",hsGetLang("tree.root.note")),type:"__ROOT__"};this.context=c;this.loadBox=j;this.treeBox=l;this._pid="";this._url="";this._data=[];if(i){for(var r in i){if("_"===r.substring(0,1)||this[r]!==undefined){this[r]=i[r]}}}var f=this;var q,p,h;function t(x){var B=jQuery(this);var k=x.data[1];var y=x.data[2];var A=B.closest(".tooltip");if(A.length){B=A.data("trigger")}if(typeof(y)==="function"){y.call(f,B,k);return}var w;if(-1!=jQuery.inArray(l[0],B.parents())){w=f.getCid(B)}else{w=f.getSid()}if(w==null){return}var z={};z[f.idKey]=w;y=hsFixPms(y,j);f.send(B,k,y,z)}if(d){jQuery.each(d,function(m,k){switch(k.length){case 3:h=k[0];p=k[1];q=k[2];break;case 2:h=k[0];p=k[1];q=undefined;break;default:return}if(typeof(p)!=="string"||/^[@%\^\-+~>*#]/.test(p)){c.hsFind(p).on("click",[p,q,h],t)}else{c.on("click",p,[p,q,h],t)}})}function o(x){var B=jQuery(this);var k=x.data[1];var y=x.data[2];var A=B.closest(".tooltip");if(A.length){B=A.data("trigger")}if(typeof(y)==="function"){y.call(f,B,k);return}var w;if(-1!=jQuery.inArray(l[0],B.parents())){w=f.getCid(B)}else{w=f.getSid()}if(w==null){return}var z={};z[f.idKey]=w;y=hsFixPms(y,j);f.open(B,k,y,z)}if(v){jQuery.each(v,function(m,k){switch(k.length){case 3:h=k[0];p=k[1];q=k[2];break;case 2:h=k[0];p=k[1];q=undefined;break;default:return}if(typeof(p)!=="string"||/^[@%\^\-+~>*#]/.test(p)){c.hsFind(p).on("click",[p,q,h],o)}else{c.on("click",p,[p,q,h],o)}})}l.on("click",".tree-node td.tree-name",function(){f.select(jQuery(this).closest(".tree-node"))});l.on("click",".tree-node td.tree-hand",function(){f.toggle(jQuery(this).closest(".tree-node"))});l.on("dblclick",".tree-node td:not(.tree-hand)",function(){f.toggle(jQuery(this).closest(".tree-node"))});if(e){l.on("treeSelect",function(x,y){for(var w=0;w<e.length;w++){var n=e[w][0];var k=e[w][1];n=n.replace("{ID}",encodeURIComponent(y));n=hsFixPms(n,j);l.hsFind(k).hsLoad(n)}})}this.fillInfo(b,jQuery("<div/>").appendTo(l).attr("id","tree-node-"+b.id).attr("class","tree-node tree-root"));if(g){this.load(b.id,hsFixPms(g,j),hsSerialMix(a,s))}}HsTree.prototype={load:function(a,b,c){c=hsSerialObj(c);if(a){this._pid=a}if(b){this._url=b}if(c){this._data=c}hsSetSeria(this._data,this.pidKey,this._pid);this.ajax({url:this._url,data:this._data,type:"POST",dataType:"json",funcName:"load",cache:false,global:false,context:this,complete:function(d){this.loadBack(d,a)}})},loadBack:function(d,b){d=hsResponse(d);if(d.ok===false){return}d._pid=b;this.treeBox.trigger("loadBack",[d,this]);this.fillList(d.list||[],b);this.treeBox.trigger("loadOver",[d,this]);var a=this.getSid();var c=this.getRid();if(this.treeBox.find("#tree-node-"+a).size()===0){if(this.treeBox.find("#tree-node-"+b).size()===0){this.select(c)}else{this.select(b)}}},fillList:function(g,f){var d,j,c,a;j=this.treeBox.find("#tree-node-"+f);d=j.children(".tree-list:first");if(g.length==0){j.removeClass("tree-fold").removeClass("tree-open");d.remove();return}j.addClass("tree-open");if(d.length==0){d=jQuery('<div class="tree-list"></div>');d.appendTo(j)}var h,b,e={};e[f]=d;for(c=g.length-1;c>-1;c--){a=hsGetValue(g[c],this.idKey);j=this.treeBox.find("#tree-node-"+a);if(j.length==0){j=jQuery('<div class="tree-node"></div>');j.attr("id","tree-node-"+a)}else{j.find("table:first").empty();h=this.getPid(j);b=j.closest(".tree-list");if(h!=f){e[h]=b}}j.prependTo(d);this.fillInfo(g[c],j)}for(c in e){this.fillCnum(g.length,e[c])}},fillInfo:function(d,a){var c=jQuery('<table><tbody><tr><td class="tree-hand"><span class="caret"></span></td><td class="tree-name"></td><td class="tree-cnum"></td></tr></tbody></table>');var e,b;e=hsGetValue(d,this.nameKey);c.find(".tree-name").text(e);if(typeof(this.noteKey)!=="undefined"){e=hsGetValue(d,this.noteKey);a.find(".tree-name").attr("title",e)}if(typeof(this.typeKey)!=="undefined"){b=hsGetValue(d,this.typeKey);a.addClass("tree-type-"+b)}if(typeof(this.cnumKey)!=="undefined"){e=hsGetValue(d,this.cnumKey);c.find(".tree-cnum").text(e);if(e){a.addClass("tree-fold")}}else{a.addClass("tree-fold")}c.prependTo(a)},fillCnum:function(d,c){var b=c.closest(".tree-node");var a=c.children(".tree-node");if(typeof(d)==="undefined"){d=a.length}if(d!=a.length){for(var e=a.length-1;e>d-1;e--){jQuery(a[e]).remove()}}if(d!=0){b.find(".tree-cnum").text(d.toString())}else{b.find(".tree-cnum").hide();b.removeClass("tree-fold").removeClass("tree-open")}},send:function(b,f,a,e){b=jQuery(b);var d=this;var c=function(){var g=jQuery.extend({},hsSerialDat(a),hsSerialDat(e||{}));d.ajax({url:a,data:e,type:"POST",dataType:"json",funcName:"send",cache:false,global:false,context:d,trigger:b,complete:function(h){this.sendBack(b,h,g)}})};if(!f){c()}else{this.warn(f,"warning",c,null)}},sendBack:function(b,d,c){b=jQuery(b);d=hsResponse(d,1);if(d.ok){if(d.msg){this.note(d.msg,"success")}}else{if(d.msg){this.warn(d.msg,"warning")}else{this.warn(hsGetLang("error.undef"))}return}var a=jQuery.Event("sendBack");b.trigger(a,[d,c,this]);if(a.isDefaultPrevented()){return}if(c[this.pidKey]!==undefined){this.load(c[this.pidKey])}if(c[this.idKey]!==undefined){this.load(this.getPid(c[this.idKey]))}},open:function(c,g,b,d){if(-1!=b.indexOf("{ID}")){var e,j,a=[];j=hsSerialArr(d);for(e=0;e<j.length;e++){a.push(encodeURIComponent(j[e].value))}b=b.replace("{ID}",a.join(","));d=undefined}c=jQuery(c);var h=this;var f=jQuery.extend({},hsSerialDat(b),hsSerialDat(d||{}));if(g){if(g instanceof String&&/^_/.test(g)){b=hsSetPms(b,d);window.open(b,g);return}g=c.hsFind(g);g.hsOpen(b,d,function(){h.openBack(c,jQuery(this),f)}).data("rel",c.closest(".loadbox").get(0))}else{jQuery.hsOpen(b,d,function(){h.openBack(c,jQuery(this),f)})}},openBack:function(a,c,d){a=jQuery(a);var b=this;a.trigger("openBack",[c,d,this]);c.on("saveBack",function(f,h,e){var g=jQuery.Event("saveBack");g.relatedTarget=f.target;g.relatedHsInst=e;a.trigger(g,[h,d,b]);if(g.isDefaultPrevented()){return}if(d[b.pidKey]!==undefined){b.load(d[b.pidKey])}else{if(d[b.idKey]!==undefined){b.load(b.getPid(d[b.idKey]))}else{b.load(b.getSid())}}})},ajax:function(){return jQuery.hsAjax.apply(window,arguments)},note:function(){return jQuery.hsNote.apply(window,arguments)},warn:function(){return jQuery.hsWarn.apply(window,arguments)},select:function(c){var a=this.getNode(c);c=this.getId(a);var b=jQuery.Event("treeSelect");a.children("table").trigger(b,[c,this]);if(b.isDefaultPrevented()){return}this.treeBox.find(".tree-curr").removeClass("tree-curr");a.addClass("tree-curr")},toggle:function(d){var b=this.getNode(d);d=this.getId(b);var c=jQuery.Event("treeToggle");b.children("table").trigger(c,[d,this]);if(c.isDefaultPrevented()){return}var a=b.children(".tree-list");a.toggle();if(a.size()){b.removeClass("tree-open").removeClass("tree-fold");a.is(":visible")?b.addClass("tree-open"):b.addClass("tree-fold")}else{this.load(d)}},getId:function(a){if(typeof(a)==="object"){return this.getId(a.attr("id"))}else{if(a){return a.toString().substring(10)}else{return""}}},getPid:function(a){return this.getId(this.getPnode(a))},getCid:function(a){return this.getId(jQuery(a).closest(".tree-node"))},getSid:function(){return this.getId(this.treeBox.find(".tree-curr"))},getRid:function(){return this.getId(this.treeBox.find(".tree-root"))},getNode:function(a){if(typeof(a)==="object"){return a.closest(".tree-node")}else{return this.treeBox.find("#tree-node-"+a)}},getPnode:function(a){return this.getNode(a).parent().closest(".tree-node")}};jQuery.fn.hsTree=function(a){return this.hsBind(HsTree,a)};(function(a){a(document).on("treeSelect",".HsTree .tree-node>table",function(b,f,e){var d=e.context;var c=e.getRid();d.find(".for-select").prop("disabled",c==f)}).on("selectstart",".HsTree",function(b){b.preventDefault()})})(jQuery);
jQuery.fn.hsPick=function(d,o,i,u,e){var k={};var q=i.attr("data-fn")||i.attr("name");var l=i.attr("data-ft")||i.attr("type");var w=i.attr("data-vk")||"id";var c=i.attr("data-tk")||"name";var m=i.attr("data-at");var r=i.is(".pickmul")||!!i.data("repeated")||!!i.data("multiple")||/(\[\]|\.\.|\.$)/.test(q);var s=i.closest(".HsForm").data("HsForm")||{};var f=jQuery(this);if(!u){do{u=s["_fill_"+q];if(u){break}u=s["_fill_"+l];if(u){break}u=hsFormFillPick}while(false)}if(!e){do{e=s["_fork_"+q];if(e){break}e=s["_fork_"+l];if(e){break}e=hsFormForkData}while(false)}e.call(s,i,k,q);function h(A,n,z,x){var v=jQuery.Event("pickItem");v.target=x;i.trigger(v,arguments);if(v.isDefaultPrevented()){return false}if(!r){for(var y in k){delete k[y]}if(n!==undefined){k[A]=[n,z]}b()}else{if(n!==undefined){k[A]=[n,z]}else{delete k[A]}var t=Object.keys(k).length;o.find(".picknum").text(t)}return true}function b(){var n=jQuery.Event("pickBack");n.target=o;i.trigger(n,[k,q,l]);if(n.isDefaultPrevented()){return false}o.hsClose();u.call(s,i,k,q);i.trigger("change",[k,q]);return true}function a(){var v=jQuery(this);var n=jQuery.Event("pickOpen");n.target=v;i.trigger(n,[k,q,l]);v.addClass("picksel").toggleClass("pickmul",r).on("change",".checkone",p).on("click",".commit",g).on("saveBack",".create",j);var x=Object.keys(k);var t=x.length;v.data("pickData",k);v.find(".checkone").val(x);v.find(".picknum").text(t)}function p(){var A=jQuery(this);if(A.closest(".HsList").data("HsList")._info){return}if(A.closest(".openbox").is(o)!==true){return}var C=A.prop("checked");var t=A.val();var x;var n;if(C){do{x=A.attr("title")||"";n=A.hsData();var z=A.closest("table").find("thead");var v=A.closest("tr").find("td");var B;var y;B=z.find("[data-fn='"+c+"']").index();if(B!==-1){y=v.eq(B).text()}if(y){x=y;break}B=z.find("[data-ft='"+c+"']").index();if(B!==-1){x=v.eq(B).text()}if(y){x=y;break}}while(false)}if(h(t,x,n,A)===false){return false}}function j(){var v=jQuery(this);if(v.closest(".HsList").data("HsList")._info){return}if(v.closest(".openbox").is(o)!==true){return}var t=arguments[0];var y=arguments[1];if(y.list){y=y.list[0]}else{if(y.info){y=y.info}else{if(y.id&&m){$.hsAjax({url:hsSetParam(m,w,y.id),cache:false,rsync:false,dataType:"json",complete:function(z){z=hsResponse(z);j.call(v[0],t,z)}});return}else{return}}}var x=y[w]||hsGetValue(y,w);var n=y[c]||hsGetValue(y,c);if(h(x,n,y)===false){return false}}function g(){var n=jQuery(this);if(n.closest(".HsList").data("HsList")._info){return}if(n.closest(".openbox").is(o)!==true){return}b();return false}if(o){o=o.hsOpen(d,a)}else{o=jQuery.hsOpen(d,a)}o.data("rel",f.closest(".openbox")[0]);return o};function hsFormForkData(c,b){if(c.is("input")){var e=c.val();var d=c.data();var a=c.attr("title")||c.data("name");if(e){b[e]=[a,d||{}]}}else{if(c.is("ul,ol")){c.find("li").each(function(){var j=jQuery(this);var g=j.find("input");var i=g.val();var h=g.data();var f=j.attr("title")||g.data("name");if(i){b[i]=[f,h||{}]}})}else{if(c.is("table,tbody")){c.find("tr").each(function(){var j=jQuery(this);var g=j.find("input");var i=g.val();var h=g.data();var f=j.attr("title")||g.data("name");if(i){b[i]=[f,h||{}]}})}else{c.find("input:hidden").each(function(){var g=jQuery(this);var i=g.val();var h=g.data();var f=g.attr("title")||g.data("name");if(i){b[i]=[f,h||{}]}})}}}}function hsFormFillPick(h,k,p){if(!p){p=h.data("fn")}var o=h.is(".pickrol")||!!h.data("readonly");var w=h.is(".pickmul")||!!h.data("repeated")||!!h.data("multiple")||/(\[\]|\.\.|\.$)/.test(p);var f=h.siblings("[data-toggle=hsPick],[data-toggle=hsFork]");h.toggleClass("pickmul",w);if(this._info){var r=h.attr("data-ak")||"data";var l=this._info[r]||hsGetValue(this._info,r);if(k==l&&p==r){if(!k){return}if(!w){k=[k]}}else{if(!jQuery.isPlainObject(k)){k=l;if(!k){return}if(!w){k=[k]}}}}if(jQuery.isArray(k)){var e=h.attr("data-tk")||"name";var x=h.attr("data-vk")||"id";var d={};for(var u=0;u<k.length;u++){var s=k[u];if(!jQuery.isPlainObject(s)&&!jQuery.isArray(s)){continue}var c=s[x]||hsGetValue(s,x);var g=s[e]||hsGetValue(s,e);if(c!==undefined&&g!==undefined){d[c]=[g,s]}}k=d}else{if(!k){k={}}}function y(n,v){var i=n.data("txt");var j=n.data("cls");n.text(i);v.val("");v.attr("title","");n.attr("class",j)}function q(j,n,v,i){j.text(i);n.val(v);n.attr("title",i);j.addClass("btn-info");j.append('<span class="close pull-right">&times;</span>')}function t(A,B,i,j){var n=jQuery("<span></span>").text(i);var v=jQuery('<input type="hidden" />').attr("name",p).val(B);var C=jQuery('<li class="'+j[0]+' form-control"></li>').attr("title",i).append('<span class="close pull-right">&times;</span>').append('<span class="'+j[1]+'"></span>').append(n).append(v);A.append(C)}if(h.is("input")){if(!f.data("pickInited")){f.data("pickInited",1);f.data("txt",f.text());f.data("cls",f.attr("class"));f.on("click",".close",[f,h],function(i){var j=i.data[0];var n=i.data[1];var v=n.val();delete k[v];y(n,j);n.trigger("change");return false})}if(!jQuery.isEmptyObject(k)){for(var z in k){var a=k[z];var m=a[0];q(f,h,z,m)}}else{y(f,h)}}else{if(!h.data("pickInited")){h.data("pickInited",1);h.on("click",".close",[f,h],function(i){var n=i.data[0];var v=i.data[1];var j=jQuery(this).closest("li");var A=j.find("input:hidden").val();delete k[A];j.remove();n.show();v.trigger("change");return false});h.on("click","li.btn",[f,h],function(j){var B=j.data[0];var C=j.data[1];var A=jQuery(this).closest("li");var D=A.find("input:hidden").val();var v=C.attr("data-vk")||("id");var n=C.attr("data-href");var i=C.attr("data-target");if(n==="-"||i==="-"||j.isDefaultPrevented()){return}if(n){n=hsSetParam(n,v,D);if(!i){jQuery.hsOpen(n)}else{C.hsFind(i).hsOpen(n)}}else{if(!o&&!w){B.click()}}})}if(!jQuery.isEmptyObject(k)){if(!w){f.hide()}}else{if(!o){f.show()}}var b=[];if(h.attr("data-href")){b[0]=o?"btn btn-link":"btn btn-info";b[1]=o?"bi bi-hi-fork":"bi bi-hi-fork"}else{b[0]=o?"btn btn-text":"btn btn-info";b[1]=o?"bi bi-hi-fork":"bi bi-hi-fork"}b[0]=h.attr("data-item-class")||b[0];b[1]=h.attr("data-icon-class")||b[1];h.empty();for(var z in k){var a=k[z];var m=a[0];t(h,z,m,b)}}}function hsListFillPick(b,a,f){var c=b.closest(".picksel");var d=c.hasClass("pickmul");var e=c.data("pickData")||{};if(!d){c.find(".checkall").hide()}if(!d){HsList.prototype._fill__radio.call(this,b,a,f)}else{HsList.prototype._fill__check.call(this,b,a,f)}if(e[a]!==undefined){b.find(".checkone").prop("checked",true).change()}b.find(".checkone").data(this._info)}(function(a){a(document).on("click","[data-toggle=hsPick],[data-toggle=hsFork]",function(){var b=a(this).attr("data-href")||a(this).attr("href");var c=a(this).attr("data-target");var d=a(this).attr("data-result");if(c){c=a(this).hsFind(c)}if(d){d=a(this).hsFind(d)}else{d=a(this).siblings("[name],[data-fn],[data-ft]").not(".form-ignored")}a(this).hsPick(b,c,d);return false})})(jQuery);jQuery.fn.hsFork=jQuery.fn.hsPick;hsFormFillFork=hsFormFillPick;hsListFillFork=hsListFillPick;
(function(a){a.fn.hsPickFile=function(g,h){if(!h){return}g=a(g);var b=/^data:/.test(h)?"":decodeURIComponent(h.replace(/^.*[\/\\]/,""));var e=g.is(".pickrol")?"":"bi bi-hi-file";var c=g.is(".pickrol")?"btn btn-link":"btn btn-info";var f=a(this).after(a(this).clone().val(""));var d=a("<span></span>").text(b);var i=a('<li class="'+c+' form-control"></li>').attr("title",b).append('<span class="close pull-right">&times;</span>').append('<span class="'+e+'"></span>').append(d).append(f);g.append(i);return i};a.fn.hsFillFile=function(d,b){if(!b){return}var f=a(this);var e=/^data:/.test(b)?"":decodeURIComponent(b.replace(/^.*[\/\\]/,""));var h=f.is(".pickrol")?"":"bi bi-hi-file";var j=f.is(".pickrol")?"btn btn-link":"btn btn-info";var i=a('<input  type="hidden" />').attr("name",d).val(b);var g=a("<span></span>").text(e);var c=a('<li class="'+j+' form-control"></li>').attr("title",e).append('<span class="close pull-right">&times;</span>').append('<span class="'+h+'"></span>').append(g).append(i);f.append(c);return c};a.fn.hsPickView=function(i,b,m,j,e){if(!b){return}a(this).before(a(this).clone().val(""));i=a(i);var l=a(this);var g=/^data:/.test(b)?"":decodeURIComponent(b.replace(/^.*[\/\\]/,""));var d=a('<li class="preview"></li>').attr("title",g).css({width:m+"px",height:j+"px",overflow:"hidden"});var c;if(!e){c=function(){var k=this.width;var o=this.height;var n=a(this);n.css({top:"0px",left:"0px"});d.css({width:k+"px",height:o+"px"})}}var f=e==="pick"?a.hsPickSnap(b,m,j,c):a.hsKeepSnap(b,m,j,c);d.append(l).append(f).append('<a href="javascript:;" class="close">&times;</a>');i.append(d);return d};a.fn.hsFillView=function(g,b,n,l,e){if(!b){return}var j=a(this);var m=a('<input  type="hidden" />').attr("name",g).val(b);var i=/^data:/.test(b)?"":decodeURIComponent(b.replace(/^.*[\/\\]/,""));var d=a('<li class="preview"></li>').attr("title",i).css({width:n+"px",height:l+"px",overflow:"hidden"});var c;if(!e){c=function(){var k=this.width;var p=this.height;var o=a(this);o.css({top:"0px",left:"0px"});d.css({width:k+"px",height:p+"px"})}}var f=e==="pick"?a.hsPickSnap(b,n,l,c):a.hsKeepSnap(b,n,l,c);d.append(m).append(f).append('<a href="javascript:;" class="close">&times;</a>');j.append(d);return d};a.fn.hsReadFile=function(b){this.each(function(){var c=this;if(this.files){if(window.FileReader){a.each(this.files,function(f,e){var d=new FileReader();d.onloadend=function(g){b.call(c,e,g.target.result)};d.readAsDataURL(e)})}else{a.each(this.files,function(e,d){b.call(c,d,d.getAsDataURL())})}}else{b.call(c,null,c.value)}});return this};a.hsPickSnap=function(g,d,f,c){var e=new Image();e.onload=function(){var i=e.width;var h=e.height;var b=h*d/f;if(b>i){e.width=d;e.height=h*d/i;a(e).css("top",(((f-e.height)/2))+"px")}else{e.height=f;e.width=i*f/h;a(e).css("left",(((d-e.width)/2))+"px")}if(c){c.call(e)}};e.src=g;return a(e)};a.hsKeepSnap=function(g,d,f,c){var e=new Image();e.onload=function(){var i=e.width;var h=e.height;var b=h*d/f;if(b<i){e.width=d;e.height=h*d/i;a(e).css("top",(((f-e.height)/2))+"px")}else{e.height=f;e.width=i*f/h;a(e).css("left",(((d-e.width)/2))+"px")}if(c){c.call(e)}};e.src=g;return a(e)};a(document).on("click","[data-toggle=hsFile]",function(){var c=a(this).siblings(":file");if(!c.data("picked")){c.data("picked",1);var b=c.siblings(".pickbox");c.on("change",function(){_hsSoloFile(b,false);c.hsPickFile(b,c.val())})}c.click()});a(document).on("click","[data-toggle=hsView]",function(){var g=a(this).siblings(":file");if(!g.data("picked")){g.data("picked",1);var f=g.siblings(".pickbox");var i=g.prop("multiple");var c=f.data("mode");var b=f.data("size");var e=b.split("*",2);b=e[0];e=e[1];var d=a('<input type="hidden"/>').attr("name",g.attr("name"));g.on("change",function(){g.hsReadFile(function(k,j){_hsSoloFile(f,false);if(i){var h=g.clone();h[0].filez=[k];h.val("");g.val("");h.hsPickView(f,j,b,e,c)}else{g.hsPickView(f,j,b,e,c)}setTimeout(function(){d.remove()},100)});f.append(d)})}g.click()});a(document).on("click","ul.pickbox li",function(b){var e=a(this).closest(".pickbox");if(e.siblings("[data-toggle=hsFile],[data-toggle=hsView]").size()==0){return}if(a(b.target).is(".close")){a(this).remove();e.trigger("change");_hsSoloFile(e,true);return}var d=a(this).find("input");if(d.attr("type")!="file"){var c=hsFixUri(d.val());if(c){window.open(c,"_blank")}}})})(jQuery);function _hsSoloFile(c,a){var b=c.data("fn");if(!b||c.hasClass("pickmul")){return}if(!c.data("repeated")&&!c.data("multiple")&&!/(\[\]|\.\.|\.$)/.test(b)){c.siblings("[data-toggle=hsFile],[data-toggle=hsView]").toggle(a);c.removeClass("pickmul")}else{c.addClass("pickmul")}}function hsFormFillFile(b,a,c){if(!a){return}if(!jQuery.isArray(a)){a=[a]}if(a.length){_hsSoloFile(b,false)}jQuery.each(a,function(e,d){b.hsFillFile(c,d)})}function hsFormFillView(e,c,f){if(!c){return}if(!jQuery.isArray(c)){c=[c]}if(c.length){_hsSoloFile(e,false)}var b=e.data("mode");var a=e.data("size");var d=a.split("*",2);a=d[0];d=d[1];jQuery.each(c,function(h,g){e.hsFillView(f,g,a,d,b)})};
(function(f){function c(m,k){m=m?m:"";m=m.toString();var l=m.length;for(var n=l;n<k;n++){m="0"+m}return m}function d(n,o){var l=o.getMonth()+1;var q=o.getFullYear();var k=n.find("[data-date=d]");var p=k.val();if(l==2){if((q%4==0&&q%100!=0)||(q%400==0)){if(p>29){k.val(29).change()}k.find("option:gt(28)").hide()}else{if(p>28){k.val(28).change()}k.find("option:gt(27)").hide()}}else{if((l<7&&l%2==0)||(l>7&&l%2==1)){if(p>30){k.val(30).change()}k.find("option:gt(29)").hide()}else{k.find("option:gt(27)").show()}}}function h(k,l){k.find("[data-date]").each(function(){var m=f(this).data("date");switch(m){case"La":case"Sa":f(this).val(l.getHours()>11?1:0);break;case"LM":case"SM":f(this).val(l.getMonth());break;case"M":f(this).val(l.getMonth()+1);break;case"y":f(this).val(l.getFullYear());break;case"Sy":f(this).val(l.getFullYear()-2000);break;case"d":f(this).val(l.getDate());break;case"H":f(this).val(l.getHours());break;case"k":f(this).val(l.getHours()+1);break;case"K":f(this).val(l.getHours()%12);break;case"h":f(this).val(l.getHours()%12)+1;break;case"m":f(this).val(l.getMinutes());break;case"s":f(this).val(l.getSeconds());break;case"S":f(this).val(l.getMilliseconds());break}});return l}function a(l,m){var k=l.find("[data-date=La],[data-date=Sa]").val()=="1";l.find("[data-date]").each(function(){var n=f(this).data("date");var p=parseInt(f(this).val());if(isNaN(p)){var o;o=f(this).children().eq(0);p=parseInt(o.val());o.prop("selected",true)}switch(n){case"LM":case"SM":m.setMonth(p);break;case"M":m.setMonth(p-1);break;case"y":m.setFullYear(p);break;case"Sy":m.setFullYear(p+2000);break;case"d":m.setDate(p);break;case"H":m.setHours(p);break;case"k":m.setHours(p-1);break;case"K":m.setHours(p+(k?12:0));break;case"h":m.setHours(p+(k?11:-1));break;case"m":m.setMinutes(p);break;case"s":m.setSeconds(p);break;case"S":m.setMilliseconds(p);break}});return m}function j(l){var k=l.length;var m=l.substring(0,1);switch(m){case"a":if(k>=4){return i("La",hsGetLang("date.La"))}else{return i("Sa",hsGetLang("date.Sa"))}case"M":if(k>=4){return i("LM",hsGetLang("date.LM"))}if(k==3){return i("SM",hsGetLang("date.SM"))}else{return e("M",1,12,k)}case"y":if(k>=4){return e("y",1949,2099,k)}else{return e("Sy",0,99,k)}case"d":return e(m,1,31,k);case"H":return e(m,0,23,k);case"k":return e(m,1,24,k);case"K":return e(m,0,11,k);case"h":return e(m,1,12,k);case"m":return e(m,0,59,k);case"s":return e(m,0,59,k);case"S":return e(m,0,999,k)}}function i(l,k){var p='<select class="form-control datebox-'+l+'" data-date="'+l+'">';for(var n=k.length,o=0;o<n;o++){var m=k[o];p+='<option value="'+o+'">'+m+"</option>"}p+="</select>";return f(p)}function e(m,o,l,k){var p='<select class="form-control datebox-'+m+'" data-date="'+m+'">';for(;o<=l;o++){var n=c(o,k);p+='<option value="'+o+'">'+n+"</option>"}p+="</select>";return f(p)}function g(k){var l=f('<span class="input-group-addon"></span>');l.text(k.replace(/^'|'$/g,""));return l}function b(l){var o=f('<div class="input-group datebox"></div>');var n=/([MdyHkKhmsSa]+|[^MdyHkKhmsSa']+|'.*?')/g;var m=/^[MdyHkKhmsSa]+$/;var k;while((k=n.exec(l))!=null){k=k[0];if(m.test(k)){o.append(j(k))}else{o.append(g(k))}}o.append(g("").css("width","100%"));return o}f.fn.hsDate=function(){if(this.data("linked")){return}var k=this.data("format")||hsGetLang("datetime.format");var m=this;var l;do{l=m.siblings().filter("[data-widget=hsDate]");if(l.size()!=0){break}l=m.parent().filter("[data-widget=hsDate]");if(l.size()!=0){break}switch(k){case"time":k=hsGetLang("time.format");break;case"date":k=hsGetLang("date.format");break;case"datetime":case"":case null:k=hsGetLang("datetime.format")}m.addClass("invisible");l=b(k);l.insertBefore(m);l.find(".input-group-addon").last().css("text-align","right").html('<span class="today bi bi-hi-time"></span><span class="clear bi bi-hi-delete"></span>');if(m.parent().is(".input-group")){m.before(l.contents());l.remove();l=m.parent();l.addClass("datebox")}}while(false);l.addClass("datebox");l.attr("data-widget","hsDate");l.data("linked",m);m.attr("data-toggle","hsDate");m.data("linked",l);m.trigger("change")};f.fn.hsTime=function(){if(this.data("linked")){return}var o=this;var n=this.attr("type");var m=this.data("type");var q=this.data("format");var p=this.attr("pattern");var k=this.data("offset");k=parseInt(k||0);if(!q||!p){if(n=="time"){q="HH:mm";p="\\d{1,2}:\\d{1,2}"}else{if(n=="date"){q="yyyy-MM-dd";p="\\d{2,4}-\\d{1,2}-\\d{1,2}"}else{q="yyyy-MM-ddTHH:mm";p="\\d{2,4}-\\d{1,2}-\\d{1,2}T\\d{1,2}:\\d{1,2}"}}this.data("format",q);this.attr("pattern",p);this.attr("placeholder",q)}var l=this.next("input:hidden");if(!l.size()){l=this.prev("input:hidden")}if(!l.size()){l=f('<input type="hidden" class="form-ignored"/>');l.attr("name",this.attr("name"));this.attr("name","");if(!this.index()){this.after(l)}else{this.before(l)}}this.data("linked",l);l.data("linked",this);this.on("change",function(u){var r=f(this).val();if(r==""){l.val("");return}var w=hsPrsDate(r,q);var s=w.getTime();if(isNaN(s)||0===s){l.val("");return}if(m=="timestamp"||m=="datestamp"){s=Math.floor(s/1000)}s=k+s;l.val(s);l.trigger(f.Event("change",{Date:w}))});l.on("change",function(s){var r=f(this).val();if(r==""){o.val("");return}if(s.Date){return}if(m=="timestamp"||m=="datestamp"){r=r*1000}var t=hsFmtDate(r,q);o.val(t)});if(this.val()){this.change()}else{if(l.val()){l.change()}}};f(document).on("change","[data-date=M],[data-date=SM],[data-date=LM]",function(){var k=f(this).closest(".datebox");var l=new Date();var m=k.find(".datebox-y").val();if(m!==undefined){l.setFullYear(m)}else{m=k.find(".datebox-Sy").val();if(m!==undefined){l.setFullYear(m+2000)}}l.setMonth(f(this).val()-1);d(k,l)});f(document).on("change","[data-widget=hsDate]",function(l){if(f(l.target).data("toggle")=="hsDate"){return}if(!f(this).data("linked")){return}var r,p;var o=f(this);var n=o.data("linked");var k=n.data("format");var m=n.data("type");var q=n.data("offset");var p=new Date(1970,0,1,0,0,0,0);p=a(o,p);q=parseInt(q||0);if(m=="timestamp"||m=="datestamp"){q=q*1000}p.setTime(p.getTime()+q);switch(k){case"time":k=hsGetLang("time.format");break;case"date":k=hsGetLang("date.format");break;case"datetime":k=hsGetLang("datetime.format");break;default:if(!k){k=hsGetLang("datetime.format")}}switch(m){case"time":case"date":r=p.getTime();break;case"timestamp":case"datestamp":r=p.getTime()/1000;r=Math.floor(r);break;default:r=hsFmtDate(p,k)}n.val(r);n.trigger(f.Event("change",{Date:p}))});f(document).on("change","[data-toggle=hsDate]",function(l){if(f(l.target).data("toggle")!="hsDate"){return}if(!f(this).data("linked")){return}if(l.Date){return}var p=f(this);var o=p.data("linked");var k=p.data("format");var n=p.data("type");var r=p.val();var m=parseInt(r);switch(k){case"time":k=hsGetLang("time.format");break;case"date":k=hsGetLang("date.format");break;case"datetime":k=hsGetLang("datetime.format");default:if(!k){k=hsGetLang("datetime.format")}}if(!isNaN(m)&&(n=="timestamp"||n=="datestamp")){r=m*1000}if(!r){o.find("select").val("");p.val("");return}var q=hsPrsDate(r,k);h(o,q);d(o,q)});f(document).on("click",".datebox .today",function(){var k=f(this).closest(".datebox");var l=new Date();h(k,l);d(k,l);k.change()});f(document).on("click",".datebox .clear",function(){var l=f(this).closest(".datebox").find("select");var k=f(this).closest(".datebox").data("linked");l.val("");k.val("");k.change()});f(document).on("hsReady",function(){f(this).find("[data-toggle=hsDate]").each(function(){f(this).hsDate()});f(this).find("[data-toggle=hsTime]").each(function(){f(this).hsTime()})})})(jQuery);
